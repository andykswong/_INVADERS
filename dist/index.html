<!doctype html><html><head><meta charset="utf-8"><meta name="monetization" content="$ilp.uphold.com/NanhqQLkB9Y9"><title>_INVADERS</title><style>*{margin:0;padding:0}b,body,html,nav,span{transition:all .1s;background:0 0;color:#eee;font:28px 'Arial Black',sans-serif;overflow:hidden;position:absolute;display:flex;flex-direction:column;justify-content:center;align-items:center;user-select:none}b,body,html,span{width:100%;height:100%}h1{font-size:2.5em}a:active,a:hover{background:#fff}a{color:#444;background:#ddd;margin-top:.7em;width:100%;line-height:2em;text-align:center}a,p{cursor:pointer}p{position:absolute;display:block}#h{top:0;left:.4em}#s{top:0;right:.4em}#r{left:.4em;bottom:.2em}#c{right:.4em;bottom:.2em}#a{opacity:.4;border:2px solid #ccc;border-radius:50%;bottom:20%;right:15%;width:2em;line-height:2em;text-align:center}.hit{background:#6e2727}[hidden]{display:none}</style></head><body><span hidden>‚úõ</span><b></b><nav><h1>_INVADERS</h1><a>START</a><a hidden></a><a></a></nav><p id="r">üì∑</p><p id="s"></p><p hidden id="h"></p><p hidden id="c">ùíû</p><p hidden id="a">A</p><canvas></canvas><script>(()=>{function t(t,s,i=0,n=0,e=t.length-i){for(let o=0;o<e;++o)s[n+o]=t[i+o];return s}function s(t,s,i){for(let n=0;n<t.length;++n)i[n]=t[n]*s;return i}function i(t,s,i,n){const e=s.length/t,o=i.length/t;let h=0;for(let r=0;r<o;++r)for(let o=0;o<e;++o){h=0;for(let n=0;n<t;++n)h+=s[n*e+o]*i[r*t+n];n[r*e+o]=h}return n}const n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function e(t){for(let s=0;s<16;++s)t[s]=s%5?0:1;return t}function o(s,e,o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]){return t(i(4,s,e,n),o)}function h(t=0,s=0,i=0,n=0){return[t,s,i,n]}h(),a();const r=h(),c=h();function a(t=0,s=0,i=0){return[t,s,i]}function u(t,s=0,i=0,n=0){return t[0]=s,t[1]=i,t[2]=n,t}function f(t,s,i=a()){return function(t,s,i){for(let n=0;n<t.length;++n)i[n]=t[n]+s[n];return i}(t,s,i)}function l(t,i,n=a()){return s(t,i,n)}function d(s,n,e=a()){return function(t,s=0,i=0,n=0,e=0){t[0]=s,t[1]=i,t[2]=n,t[3]=e}(r,n[0],n[1],n[2],1),t(i(4,s,r,c),e,0,0,3)}const m=[0,0,0,1],v=[0,0,0,1];function p(t,i,n=[0,0,0,1]){return s(t,Math.sin(i/2),n),n[3]=Math.cos(i/2),n}function M(t,s,i=[0,0,0,1]){const n=t[0],e=t[1],o=t[2],h=t[3],r=s[0],c=s[1],a=s[2],u=s[3];return i[0]=h*r+n*u+e*a-o*c,i[1]=h*c+e*u+o*r-n*a,i[2]=h*a+o*u+n*c-e*r,i[3]=h*u-n*r-e*c-o*a,i}function w(s,i,n=a()){return t(s,m,0,0,3),m[3]=0,M(M(i,m,m),function(t,s=[0,0,0,1]){const i=1/(function(t){return Math.sqrt(function(t,s){let i=0;for(let n=0;n<t.length;++n)i+=t[n]*s[n];return i}(t,t))}(t)||1);return s[0]=-t[0]*i,s[1]=-t[1]*i,s[2]=-t[2]*i,s[3]=t[3]*i,s}(i,v),m),t(m,n,0,0,3)}function y(t,s=[0,0,0,1]){return s[1]=Math.sin(t/2),s[3]=Math.cos(t/2),s[0]=s[2]=0,s}function g(s,i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]){return e(i),t(s,i,0,12,3),i}function b(t,s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]){return e(s),s[0]=t[0],s[5]=t[1],s[10]=t[2],s}function x(t,s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]){return function(t,s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]){const i=t[0]*t[0],n=t[0]*t[1],e=t[0]*t[2],o=t[1]*t[1],h=t[1]*t[2],r=t[2]*t[2],c=t[3]*t[0],a=t[3]*t[1],u=t[3]*t[2];return s[0]=1-2*(o+r),s[1]=2*(n+u),s[2]=2*(e-a),s[4]=2*(n-u),s[5]=1-2*(i+r),s[6]=2*(h+c),s[8]=2*(e+a),s[9]=2*(h-c),s[10]=1-2*(i+o),s[3]=s[7]=s[11]=s[12]=s[13]=s[14]=0,s[15]=1,s}(t,s)}a(),a(),a();class C{constructor(t,s){this.min=t,this.max=s}}const A=a(),k=a(),z=(t=a(),s=a())=>new C(t,s);function E(s,i,n=z()){for(let t=0;t<3;++t){A[t]=i[12+t],k[t]=i[12+t];for(let n=0;n<3;++n){const e=s.min[n]*i[4*n+t],o=s.max[n]*i[4*n+t];A[t]+=Math.min(e,o),k[t]+=Math.max(e,o)}}return t(A,n.min),t(k,n.max),n}const F="_INVADERS",N=.3,I=[-20,0,-50],L=[20,50,50],P=[0,-15,0],S=z([-.5,0,-.5],[.5,2,.5]),_=z([-16,0,30],[16,0,50]),O=z([-.5,0,-.5],[.5,1.5,.5]),R=z([-.6,2.4,-.6],[.6,3.6,.6]),J=z([-.6,.4,-.6],[.6,1.6,.6]),D=[.13,.16,.18,1],T=[.92,.92,.92,.5],j=[.3,.15,.15,.5],G=[.89,.38,.17,.5],B=[.53,.84,.96,.7],W=[.95,.85,.45,.7],Y=[.18,.13,.18,1],Q=[.18,.13,.18,3],U=[.18,.15,.15,3],Z=[.78,.74,.68,-.5];function H(t,s){for(const i of t.t)d(s,i,i);return t}function V(t,s){const i=t.t.length;for(const i of s.t)t.t.push([...i]);for(const i of s.c)t.c.push([...i]);for(const n of s.i)t.i.push([n[0]+i,n[1]+i,n[2]+i]);return t}function X(t,s,i,n){return{t:[[-t,+s,+i],[+t,+s,+i],[+t,-s,+i],[-t,-s,+i],[+t,+s,-i],[-t,+s,-i],[-t,-s,-i],[+t,-s,-i]],i:[[2,1,0],[2,0,3],[6,5,4],[6,4,7],[7,4,1],[7,1,2],[3,0,5],[3,5,6],[1,4,5],[1,5,0],[6,7,2],[3,6,2]],c:Array(8).fill(n)}}function $(t,s){return x(p(t,s))}const q=H(X(100,.05,100,[.94,.87,.71,1]),g([0,-.05,0])),K=X(.5,.5,.4,T);V(K,H(X(.3,.3,.2,[.29,.69,.78,1]),g([0,0,.25]))),V(K,H(X(.15,.15,.2,Q),g([0,0,.28]))),H(K,g([0,1,0]));const tt=X(.5,.5,.4,T);V(tt,H(X(.3,.3,.2,[.84,.23,.18,1]),g([0,0,.25]))),V(tt,H(X(.15,.15,.2,Q),g([0,0,.28]))),H(tt,g([0,1,0]));const st=H(H(X(.6,.1,.05,Y),$([0,0,1],-Math.PI/6)),g([-1,.7,0]));V(st,H(H(X(.6,.1,.03,Y),$([0,0,1],Math.PI/4)),g([-1.8,.5,0]))),V(st,H(H(X(.5,.1,.02,Y),$([0,0,1],Math.PI/4)),g([-1.5,.4,0]))),V(st,H(H(X(.4,.1,.01,Y),$([0,0,1],Math.PI/4)),g([-1.2,.3,0]))),H(st,g([0,1,0]));const it=V({t:[],i:[],c:[]},tt),nt=H(H(H(X(.5,.5,.5,Y),$([0,0,1],Math.PI/4)),$([1,0,0],Math.PI/4)),g([0,0,-.5]));V(nt,H(H(H(X(.5,.5,.5,Y),$([0,0,1],-Math.PI/4)),$([1,0,0],-Math.PI/4)),g([0,0,-.5]))),H(nt,g([0,1,0])),V(it,nt);const et=X(.2,.1,.3,Y),ot=X(.04,.8,.04,U),ht=X(.1,.1,.1,[.89,.38,.17,-.95]);H(ht,$([0,0,1],Math.PI/4)),H(ht,b([1,1.5,.38])),H(ht,g([0,.95,0])),V(ht,ot);const rt={t:[],i:[],c:[]};V(rt,H(X(.1,.012,.012,Z),g([0,0,-.105]))),V(rt,H(X(.12,.01,.012,Z),g([0,0,.105]))),V(rt,H(X(.01,.01,.12,Z),g([-.105,0,0]))),V(rt,H(X(.01,.01,.12,Z),g([.105,0,0])));const ct=V({t:[],i:[],c:[]},rt);H(ct,g([0,-.03,0])),H(rt,b([.8,1,.8])),H(rt,g([0,.05,0])),V(ct,rt),H(rt,b([.8,1,.8])),H(rt,g([0,.09,0])),V(ct,rt),V(ct,H(X(.07,.07,.07,[.95,.85,.45,-.9]),g([0,.35,0]))),H(ct,g([0,.5,0])),H(ct,$([0,1,0],Math.PI/24)),V(ct,X(.015,.8,.015,U));const at=[1.12,,219,.02,.06,0,3,1.27,-6.6,,,,.04,,,,,.88,.03,.3],ut=[1.31,,126,,.07,.22,4,.29,1.5,,,,.07,.2,,.3,,.76],ft=44100,lt=(t,...s)=>{let i=t.createBufferSource(),n=t.createBuffer(s.length,s[0].length,ft);return s.map(((t,s)=>n.getChannelData(s).set(t))),i.buffer=n,i},dt=(t=1,s=.05,i=220,n=0,e=0,o=.1,h=0,r=1,c=0,a=0,u=0,f=0,l=0,d=0,m=0,v=0,p=0,M=1,w=0,y=0)=>{let g,b,x=2*Math.PI,C=c*=500*x/ft**2,A=(0<m?1:-1)*x/4,k=i*=(1+2*s*Math.random()-s)*x/ft,z=[],E=0,F=0,N=0,I=1,L=0,P=0,S=0;for(a*=500*x/ft**3,m*=x/ft,u*=x/ft,f*=ft,l=ft*l|0,b=(n=99+ft*n)+(w*=ft)+(e*=ft)+(o*=ft)+(p*=ft)|0;N<b;z[N++]=S)++P%(100*v|0)||(S=h?1<h?2<h?3<h?Math.sin((E%x)**3):Math.max(Math.min(Math.tan(E),1),-1):1-(2*E/x%2+2)%2:1-4*Math.abs(Math.round(E/x)-E/x):Math.sin(E),S=(l?1-y+y*Math.sin(2*Math.PI*N/l):1)*(0<S?1:-1)*Math.abs(S)**r*t*.3*(N<n?N/n:N<n+w?1-(N-n)/w*(1-M):N<n+w+e?M:N<b-p?(b-N-p)/o*M:0),S=p?S/2+(p>N?0:(N<b-p?1:(b-N)/p)*z[N-p|0]/2):S),g=(i+=c+=a)*Math.sin(F*m-A),E+=g-g*d*(1-1e9*(Math.sin(N)+1)%2),F+=g-g*d*(1-1e9*(Math.sin(N)**2+1)%2),I&&++I>f&&(i+=u,k+=u,I=0),!l||++L%l||(i=k,c=C,I=I||1);return z},mt=(t,...s)=>lt(t,dt(...s)),vt=((t,s,i,n=125)=>{let e,o,h,r,c,a,u,f,l,d,m,v,p,M,w,y=0,g=[],b=[],x=[],C=0,A=0,k=1,z={},E=ft/n*60>>2;for(;k;C++)g=[k=f=m=p=0],i.map(((n,m)=>{for(u=s[n][C]||[0,0,0],k|=!!s[n][C],w=p+(s[n][0].length-2-!f)*E,M=m==i.length-1,o=2,r=p;o<u.length+M;f=++o){for(c=u[o],l=o==u.length+M-1&&M||d!=(u[0]||0)|c|0,h=0;h<E&&f;h++>E-99&&l?v+=(v<1)/99:0)a=(1-v)*g[y++]/2||0,b[r]=(b[r]||0)-a*A+a,x[r]=(x[r++]||0)+a*A+a;c&&(v=c%1,A=u[1]||0,(c|=0)&&(g=z[[d=u[y=0]||0,c]]=z[[d,c]]||(e=[...t[d]],e[2]*=2**((c-12)/12),c>0?dt(...e):[])))}p=w}));return[b,x]})([[.75,0,386,,,.25,2],[.75,0,386,,,.25,2],[2,0,4e3,,,.03,2,1.25,,,,,.02,6.8,-.3,,.5]],[[[1,-1,20,,,,,,,,,,18,,16,,,,18,,,,,,,,,,,,16,,18,,20,,,,,,25,,,,20,,18,,,,18,,,,,,,,,,,,16,,15,,],[,-1,13,,,,25,,13,,,,13,,25,,,,13,,,,25,,13,,,,13,,25,,,,13,,,,25,,13,,,,13,,25,,,,6,,,,18,,6,,,,6,,18,,,,],[2,1,,,34,34,,,34,,,34,,34,,,34,,,,34,34,,,34,,,34,,34,,,34,,,,34,34,,,34,,,34,,34,,,34,,,,34,34,,,34,,,34,,34,,,34,,]],[[1,-1,16,,,,,,,,18,,,,20,,,,25,,,,,,22,20,22,,,,25,,,,,,,,,,,,,,,,,,,,24,,,,,,,,,,24,,25,,27,,],[,-1,13,,,,25,,13,,,,13,,25,,,,10,,,,22,,10,,,,10,,22,,,,10,,,,22,,10,,,,10,,22,,,,8,,,,20,,8,,,,8,,20,,23,,],[2,1,,,34,34,,,34,,,34,,34,,,34,,,,34,34,,,34,,,34,,34,,,34,,,,34,34,,,34,,,34,,34,,,34,,,,34,34,,,34,,,34,,34,,,,,]],[[1,-1,27,,,,,,,,32,,,,27,,32,,30,,,,32,,30,,27,,30,,27,,30,,32,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],[,-1,8,,20,8,18,20,,,8,,20,8,18,20,,,11,,23,11,21,23,,,11,,23,11,21,23,,,13,,25,13,23,25,,,13,,25,13,23,25,,,13,,25,13,23,25,,,28,,25,,23,,25,,],[2,1,,,34,34,,,34,34,,,34,,,34,,34,,,34,34,,,34,34,,,34,,,,,,,,34,34,,,34,34,,,34,,,34,,34,,,34,34,,,34,34,,,34,,,,,,]],[[1,-1,20,,,,,,,,,,18,,16,,,,18,,,,,,,,,,,,16,,18,,20,,,,,,25,,,,20,,18,,,,18,,,,,,,,,,,,,,,,],[,-1,13,,,13,.99,,25,,,,8,,11,,13,,13,,,13,.99,,25,,,,16,,15,11,,,13,,,13,.99,,25,,,,8,,11,,13,,13,,,13,.99,,25,,,,13,,25,,13,,],[2,1,,34,,,,34,,,,,34,,,,34,34,,,34,,,34,,,,,34,,,,34,34,,34,,,,34,,,,,34,,,,34,34,,,34,,,34,,,,,34,,,,34,34]]],[0,1,2,3,2]),pt=[[[[,,,,,4,,,,,],[,,,,4,4,,,,,],[,,,,,4,,,,,],[,,,,,4,,,,,],[,,,,4,4,4,,,,]]],[[[4,4,4,,,,,,4,3,4],[,3,,,,,,,4,,4],[,3,,,,,,,4,3,4]],[[,,,3,,,,3,,,],[,,,4,,4,,4,,,],[,,,,3,,3,,,,]]],[[[,,,,,2,,,,,]],[[,,,,2,,2,,,,]],[[4,4,4,,4,4,3,,,3],[,4,,,3,,,,,4],[,3,,2,4,,,2,,4]],[[3,3,3,,4,3,4,,,4],[,4,,,4,,,,,3],[,4,2,1,4,2,,1,2,4]],[[4,4,4,,3,4,3,,,4],[,3,,,4,,,,,4],[1,4,,,4,,,,,4,1]],[[2,2,,2,,1,,2,,2,2]]],[[[,,1,5,5,,5,5,1,,]],[[,,,,4,,4,,,,],[,,,,3,,3,,,,],[,,,,4,3,4,3,,,],[5,5,2,,,,3,,2,5,5]],[[,,,,3,,3,,,,],[,,,,4,,4,,,,],[,,,,3,4,3,4,,,],[5,5,1,,,,4,,1,5,5]]]],Mt=[[[[,,,3,,,,3,,,],[,,,,4,4,4,,,,],[,,,4,3,4,3,4,,,],[,,3,4,4,4,4,4,3,,],[,,3,,,,,,3,,],[2,,,3,3,,3,3,,,2]],[[,,,,3,,3,,,,],[,,,,4,4,4,,,,],[,,,4,4,4,4,4,,,],[,3,4,4,4,3,4,4,4,3],[5,3,,4,,,,4,,3,5],[2,2,,3,,,,3,,2,2]],[[,,,,,,,,,,],[,,,,4,4,4,,,,],[,,,4,4,4,4,4,,,],[,,,,4,4,4,,,,],[,,,,,,,,,,],[,5,2,5,,,,5,2,5]]],[[[2,1,,,,,,,,1,2]],[[1,2,,,,,,,,2,1]],[[,,,4,4,4,4,4,,,],[,,4,,,4,,,4,,],[,,4,,,4,,,4,,],[,,4,4,4,4,4,4,4,,],[,,,4,,,,4,,,],[5,5,,,4,4,4,,,5,5]],[[,,,,4,4,4,,,,],[,,,3,3,4,3,3,,,],[,,,3,3,4,3,3,,,],[,,,3,4,4,4,3,,,],[,,,,3,3,3,,,,],[5,5,,,4,,4,,,5,5]],[[,,,,,,,,,,],[,,,,3,4,3,,,,],[,,,,3,4,3,,,,],[,,,,4,4,4,,,,],[,,,,4,3,4,,,,],[,,5,5,,,,5,5,,]]],[[[,,,,,,,,,,],[,,,,,,,,,,],[,,,,,,,,,,],[,3,,,,,,,,3],[3,,3,,,,,,3,,3],[,3,,,,,,,,3],[5,,5,,5,,5,,5,,5]],[[,,,,,,,,,,],[,,,,,,,,,,],[,,,,,,,,,,],[3,4,3,,,,,,3,4,3],[4,3,4,,,,,,4,3,4],[3,4,3,,,,,,3,4,3],[,5,,5,,,,5,,5]],[[,,,,,,,,,,],[,,,,,4,,,,,],[,,,,3,4,3,,,,],[,3,3,,4,4,4,,3,3],[3,4,3,,,,,,3,4,3],[,3,3,,,,,,3,3],[5,,5,,5,,5,,5,,5]],[[,,3,4,,,,4,3,,],[,,3,,3,4,3,,3,,],[,,,,3,4,3,,,,],[,,,,4,3,4,,,,],[,,,,,,,,,,],[,,,,,,,,,,],[,5,,5,,,,5,,5]],[[,,,,,,,,,,],[,,,4,3,4,3,4,,,],[,,,,4,3,4,,,,],[,,,,,4,,,,,],[,,,,,,,,,,],[,,,,,,,,,,],[5,,5,,5,,5,,5,,5]]],[[],[[2,1,,,,,,,,2,1]],[[,,,,4,4,4,,,,],[,4,,4,4,3,4,4,,4],[,,4,4,3,3,3,4,4,,],[,,,4,4,3,4,4,,,],[1,2,,,4,4,4,,,1,2]],[[4,,,,3,4,3,,,,4],[4,4,,3,4,4,4,3,,4,4],[4,,,4,4,4,4,4,,,4],[,,,3,4,4,4,3,,,],[2,1,,,3,4,3,,,2,1]],[[,,,,4,4,4,,,,],[,,,4,3,4,3,4,,,],[,,,4,4,3,4,4,,,],[,,,4,3,4,3,4,,,],[,5,,,4,4,4,,,5]],[[,,,,4,3,4,,,,],[,,,4,4,4,4,4,,,],[,,,3,4,4,4,3,,,],[,,,4,4,4,4,4,,,],[5,5,5,,4,3,4,,5,5,5]]]];let wt={scr:1,touch:!1,sub:!1,coil:!1,beg:!0,hp:0,score:0,wave:-1};const yt=[];function gt(t,s=!1){const i=wt;wt={...wt,...t};for(const t of yt)t(wt,i,s)}function bt(t){gt({scr:2,hp:3+(wt.coil?1:0),score:0,wave:-1,touch:t})}const xt=[1,1,1];class Ct{o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];h=a();r=[0,0,0,1];u=[];constructor(t=null){(this.parent=t)&&t.u.push(this)}detach(){var t;const s=null===(t=this.parent)||void 0===t?void 0:t.u,i=s?s.indexOf(this):-1;i>=0&&(s[i]=s[s.length-1],s.pop())}update(s){var i;if(!this.hide){this.body&&function(s,i=a()){t(s,i)}(this.body.t,this.h),function(s,i,n,e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]){x(i,e);for(let t=0;t<3;++t)for(let s=0;s<3;++s)e[4*t+s]*=n[s];t(s,e,0,12,3)}(this.h,this.r,xt,this.o),this.parent&&o(this.parent.o,this.o,this.o),this.l&&(this.l.o=this.o),null===(i=this.m)||void 0===i||i.update(this.o);for(const t of this.u)t.update(s)}}}function At(t,s){if(!t.hide){s(t);for(const i of t.u)At(i,s)}}const kt=a();function zt(t,s,i){return t<s?s:t>i?i:t}function Et(t,s,i){return t*(1-i)+s*i}const Ft=2*Math.PI,Nt=[0,0,0,1];function It(t){switch(t){case"ArrowUp":case"w":return 4;case"ArrowDown":case"s":return 8;case"ArrowLeft":case"a":return 1;case"ArrowRight":case"d":return 2;case"Enter":case"e":return 16}return 0}const Lt=5123,Pt=1024,St=[5126,5120,5121,5122,Lt],_t=[4,1,1,2,2],Ot=255;function Rt(t){return _t[t&Ot]*Jt(t)}function Jt(t){return t>>8&Ot}function Dt(t){return St[t&Ot]}function Tt(t){return!!(t>>16)}function jt(t){return t-Lt+2}class Gt{constructor(t,s){this.v=t,this.p={type:34962,M:35044,...s},t.bindBuffer(this.p.type,this.g=t.createBuffer()),t.bufferData(this.p.type,this.p.size,this.p.M)}data(t,s=0){return this.v.bindBuffer(this.p.type,this.g),this.v.bufferSubData(this.p.type,s,t),this}C(){this.v.deleteBuffer(this.g)}}class Bt{constructor(t,s){this.v=t;const i=this.A=t.createShader(this.type=s.type);t.shaderSource(i,this.source=s.source),t.compileShader(i)}C(){this.v.deleteShader(this.A)}}class Wt{constructor(t,s){this.v=t;let i=0;this.p={mode:4,k:Lt,...s,F:s.F.map((({N:t,I:s,L:n=!1})=>{const e=Array(t.length);let o=0;for(let s=0;s<t.length;++s,++i){const{name:n,format:h,offset:r=o,P:c=i}=t[s];e[s]={name:n,format:h,offset:r,P:c},o=Math.max(o,r)+Rt(h)}return{N:e,I:s||o,L:n}}))},this.S=function(t,s,i,n){const e=t.createProgram();t.attachShader(e,s.A),t.attachShader(e,i.A);for(const{N:s}of n)for(const i of s)t.bindAttribLocation(e,i.P,i.name);return t.linkProgram(e),e}(t,s._,s.O,this.p.F)}C(){this.v.deleteProgram(this.S)}}function Yt(t,s,i){i?t.enable(s):t.disable(s)}const Qt={R:null,J:null,C(){}};class Ut{constructor(t){this.D=!1,this.v=t,this.canvas=t.canvas,this.T=new Zt(t,this.j("ANGLE_instanced_arrays"))}get width(){return this.v.drawingBufferWidth}get height(){return this.v.drawingBufferHeight}buffer(t){return new Gt(this.v,t)}G(t,s){return Qt}B(t){return new Bt(this.v,t)}W(t){return new Wt(this.v,t)}Y(t={}){return((t={})=>({p:t,U:null,C(){}}))(t)}Z(t){let s=this.width,i=this.height;this.v.viewport(0,0,s,i);let n=0;return t.p.clearColor&&(n|=16384,this.v.clearColor(...t.p.clearColor),this.v.colorMask(!0,!0,!0,!0)),isNaN(t.p.clearDepth)||(n|=256,this.v.clearDepth(t.p.clearDepth),this.v.depthMask(!0)),n&&this.v.clear(n),this.T}j(t){return this.v.getExtension(t)}reset(){this.T.reset()}}class Zt{constructor(t,s){this.v=t,this.H=s,this.reset()}reset(){this.state={V:null,X:0}}W(t){if(this.state.V!==t){this.state.V=t,this.v.useProgram(t.S),function(t,s,i=0){const{$:n,q:e,K:o}=s;if(s.tt,Yt(t,2929,!!e),e&&(t.depthMask(!!e.write),t.depthFunc(e.st||519)),Yt(t,3042,!!n),n){const s=n.colorMask||Ot;t.colorMask(!!(1&s),!!(2&s),!!(4&s),!!(8&s)),t.blendFuncSeparate(n.it||1,n.nt||0,n.et||1,n.ot||0),t.blendEquationSeparate(n.ht||32774,n.rt||32774)}}(this.v,t.p,this.state.X);for(let t=0;t<16;++t)this.v.disableVertexAttribArray(t);for(const{N:s}of t.p.F)for(const{P:t}of s)this.v.enableVertexAttribArray(t)}return this}index({g:t}){return this.v.bindBuffer(34963,t),this}ct(t,{g:s}){const{N:i,I:n,L:e}=this.state.V.p.F[t];this.v.bindBuffer(34962,s);for(const{format:t,offset:s,P:h}of i){var o;this.v.vertexAttribPointer(h,Jt(t),Dt(t),Tt(t),n,s),null===(o=this.H)||void 0===o||o.vertexAttribDivisorANGLE(h,e?1:0)}return this}at(t){for(const i of t){const t=this.v.getUniformLocation(this.state.V.S,i.name);if(t)if(i.values){var s;switch(null===(s=this.state.V.p.at.find((t=>t.name===i.name)))||void 0===s?void 0:s.ut){case 35676:this.v.uniformMatrix4fv(t,!1,i.values);break;case 35675:this.v.uniformMatrix3fv(t,!1,i.values);break;case 35666:this.v.uniform4fv(t,i.values);break;case 35665:this.v.uniform3fv(t,i.values);break;case 35664:this.v.uniform2fv(t,i.values);break;default:this.v.uniform1fv(t,i.values)}}else isNaN(i.value)||this.v.uniform1f(t,i.value)}return this}ft(t,s=1,i=0){const{mode:n}=this.state.V.p;var e;return s>1?null===(e=this.H)||void 0===e||e.drawArraysInstancedANGLE(n,i,t,s):this.v.drawArrays(n,i,t),this}lt(t,s=0,i=0){const{k:n,mode:e}=this.state.V.p;var o;return s>0?null===(o=this.H)||void 0===o||o.drawElementsInstancedANGLE(e,t,n,i*jt(n),s):this.v.drawElements(e,t,n,i*jt(n)),this}viewport(t,s,i,n){return this.v.viewport(t,s,i,n),this}scissor(t,s,i,n){return this}blendColor(t){return this.v.blendColor(...t),this}X(t){return this}end(){}}const Ht=document.getElementsByTagName("canvas")[0],Vt=document.getElementsByTagName("nav")[0],Xt=document.getElementsByTagName("a")[0],$t=document.getElementsByTagName("a")[1],qt=document.getElementsByTagName("a")[2],Kt=document.getElementsByTagName("b")[0],ts=document.getElementsByTagName("span")[0],ss=document.getElementsByTagName("p")[0],is=document.getElementsByTagName("p")[1],ns=document.getElementsByTagName("p")[2],es=document.getElementsByTagName("p")[3],os=document.getElementsByTagName("p")[4],hs=((t,s)=>{const i=t.getContext("webgl",{preserveDrawingBuffer:!0});return i?new Ut(i):null})(Ht);hs.j("OES_standard_derivatives");const rs=hs.Y({clearColor:D,clearDepth:1}),cs=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],as=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],us=a(),fs=hs.W({_:hs.B({type:35633,source:"uniform mat4 vp;attribute vec3 pos;attribute vec4 c,m1,m2,m3,m4;varying vec3 vPos;varying vec4 vC;void main(){vec4 v=mat4(m1,m2,m3,m4)*vec4(pos,1.);vPos=v.xyz;vC=c;gl_Position=vp*v;}"}),O:hs.B({type:35632,source:"#extension GL_OES_standard_derivatives:require\nprecision mediump float;uniform vec3 p;uniform vec4 f;varying vec3 vPos;varying vec4 vC;void main(){vec3 v=normalize(cross(dFdx(vPos),dFdy(vPos))),s=normalize(vec3(-1.,-2.,-1.)),a=normalize(p-vPos),w=normalize(s+a);float m=mix(min(max(dot(v,s),0.)+pow(max(dot(v,w),0.),abs(vC.w)),1.),1.,abs(vC.w)*step(0.,-vC.w)),r=max(smoothstep(10.,80.,length(p-vPos)),max(smoothstep(15.,22.,abs(vPos.x)),smoothstep(45.,60.,abs(vPos.z))));gl_FragColor=vec4(mix(vC.xyz*max(m,.25),f.xyz,r),1.);}"}),F:[{N:[{name:"pos",format:768},{name:"c",format:Pt}]},{N:[{name:"m1",format:Pt},{name:"m2",format:Pt},{name:"m3",format:Pt},{name:"m4",format:Pt}],L:!0}],at:[{name:"vp",ut:35676},{name:"p",ut:35665},{name:"f",ut:35666}],q:{st:515,write:!0}}),ls=hs.W({_:hs.B({type:35633,source:"uniform mat4 vp;uniform float vw,ct;attribute vec3 p,v;attribute float t,s;attribute vec4 c;varying vec4 vC;void main(){vC=vec4(c.xyz,c.w*(1.-mod(ct,t)/t/2.)),gl_Position=vp*vec4(p+mod(ct,t)*v,1.),gl_PointSize=vw/gl_Position.w*(1.-mod(ct,t)/t)*s;}"}),O:hs.B({type:35632,source:"precision mediump float;varying vec4 vC;void main(){vec2 v=2.*gl_PointCoord.xy-vec2(1.,1.);gl_FragColor=vec4(vC.xyz,smoothstep(1.,0.,length(v))*vC.w);}"}),F:[{N:[{name:"p",format:768},{name:"v",format:768},{name:"t",format:256},{name:"s",format:256},{name:"c",format:Pt}]}],at:[{name:"vp",ut:35676},{name:"vw"},{name:"ct"}],q:{st:515,write:!1},$:{it:770,et:1,nt:771,ot:771},mode:0}),ds=[],ms=[],vs=new Float32Array(73728),ps=hs.buffer({M:35040,size:vs.byteLength});function Ms(t){return ds.push(t),ds.length-1}function ws(s,i,n,e,o,h,r,c,a){const u=new Float32Array(12*s);for(let i=0,f=0;f<s;++f){for(let t=0;t<3;++t)us[t]=Et(o[t],h[t],Math.random());t(us,u,0,i,3),i+=3;for(let t=0;t<3;++t)us[t]=Et(r[t],c[t],Math.random());t(us,u,0,i,3),i+=3,u[i++]=Math.max(.01,Math.random())*n,u[i++]=e,t(a,u,0,i,4),i+=4}ms.push({s:0,h:i,d:u})}function ys(t,s){return t.reduce(((t,i,n)=>(t.push(...s(i,n)),t)),[])}function gs(t=6){let s=0;for(let i=0;i<t;++i)s+=Math.random();return s/6}function bs(t,s,i=128){const n=new Float32Array(ys(s.t,((t,i)=>[...t,...s.c[i]]))),e=new Float32Array(16*i),o=new Uint16Array(ys(s.i,(t=>t)));return{dt:t.buffer({size:n.byteLength}).data(n),vt:t.buffer({type:34963,size:o.byteLength}).data(o),count:o.length,Mt:e,wt:t.buffer({M:35040,size:e.byteLength}),yt:0}}const xs={gt:Ms(bs(hs,q,16)),wand:Ms(bs(hs,ht,16)),coil:Ms(bs(hs,ct,16)),bt:Ms(bs(hs,it,256)),eye:Ms(bs(hs,K,256)),xt:Ms(bs(hs,tt,256)),Ct:Ms(bs(hs,st,512)),At:Ms(bs(hs,et,512))},Cs=a(),As=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],ks=z(),zs=z();function Es(t,s){for(let i=0;i<3;++i)if(t.max[i]<=s.min[i]||t.min[i]>=s.max[i])return!1;return!0}function Fs(t,s,i=!0){return{node:t,kt:2+(i?1:0),t:[0,0,0],zt:[0,0,0],shape:s}}let Ns;function Is(){if(!Ns){Ns=new AudioContext;const t=Ns.createGain();t.gain.value=.4,t.connect(Ns.destination);const s=lt(Ns,...vt);s.loop=!0,s.connect(t),s.start()}}function Ls(){Ns&&Ps(mt(Ns,...ut))}function Ps(t){t.connect(Ns.destination),t.start()}class Ss extends Ct{Et=0;i=0;constructor(t,s,i,n=1,e=1){super(t),this.c=s,this.Ft=i,this.s=n,this.hp=e;const o=Math.max(1,n/2);this.body=Fs(this,z([-.5*o,-.5*o,-.5*o],[.5*o,.5*o,.5*o]),!1),i&&Ns&&Ps(mt(Ns,...at))}update(t){super.update(t),++this.i%2&&ws(16,.05*this.s,.1*this.s,.3*this.s,[this.body.t[0]-.2,this.body.t[1]-.2,this.body.t[2]-.2],[this.body.t[0]+.2,this.body.t[1]+.2,this.body.t[2]+.2],[Math.min(0,-this.body.zt[0])-5*this.s,Math.min(0,-this.body.zt[1])-5*this.s,Math.min(0,-this.body.zt[1])-5*this.s],[Math.max(0,-this.body.zt[0])+5*this.s,Math.max(0,-this.body.zt[1])+5*this.s,Math.max(0,-this.body.zt[1])+5*this.s],this.c),((this.Et+=t)>=10||this.o[13]<0||this.o[14]<-50||this.o[14]>50)&&this.detach()}detach(){super.detach(),ws(32,.2,.4,.2*this.s,[this.body.t[0]-.2,this.body.t[1]-.2,this.body.t[2]-.2],[this.body.t[0]+.2,this.body.t[1]+.2,this.body.t[2]+.2],[-10*this.s,-10*this.s,-10*this.s],[10*this.s,10*this.s,10*this.s],this.c)}}class _s extends Ct{Nt=0;constructor(t,s,i,n=3){super(t),this.control=i,this.hp=n,this.body=Fs(this,S),this.body.bound=_,this.It=new Ct(this),this.It.l={id:xs.wand};const e=this.Lt=new Ct(this),o=new Ct(e);o.m=s,u(o.h,0,1.7,0),p([0,1,0],Math.PI,o.r)}update(t){this.control.update();let s=!1;this.Nt=Math.max(0,this.Nt-t),!this.Nt&&this.control.Pt&&(this.Nt=.5,s=!0),function(t,s=[0,0,0,1]){s[0]=Math.sin(t/2),s[3]=Math.cos(t/2),s[1]=s[2]=0}(this.control.St,this.Lt.r),y(this.control._t,this.r);const i=this.control.dir,n=this.body.zt;if(n[0]=10*i[0],n[1]=this.body.t[1]&&i[1]?20:n[1],n[2]=10*i[2],super.update(t),s){const t=this.It.l.id===xs.wand?new Ss(Js,G,!0):new Ss(Js,W,!0,2.5),s=u(t.body.zt,0,0,25);w(w(s,this.Lt.r,s),this.r,s),u(t.body.t,this.o[12],this.o[13]+1.7,this.o[14])}const e=this.Nt?(Math.sin(6*(.5-this.Nt))+1)/2:0;p([1,0,0],Math.max(Math.PI/6,Math.PI/3*e),this.It.r),u(this.It.h,-.7,1,1-.5*e)}}const Os=new Ct,Rs=new Ct(Os),Js=new Ct(Os),Ds=new class{t=a();view=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Ot=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];constructor(t=1,s=Math.PI/4,i=.1,n=200){this.Rt=t,this.Jt=s,this.Dt=i,this.Tt=n}update(s){!function(t,s,i,n=1/0,o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]){const h=1/Math.tan(s/2);if(e(o),o[0]=h/t,o[5]=h,o[11]=-1,o[15]=0,isFinite(n)){const t=1/(i-n);o[10]=(i+n)*t,o[14]=2*i*n*t}else o[10]=-1,o[14]=-2*i}(this.Rt,this.Jt,this.Dt,this.Tt,this.Ot),t(s,this.t,12,0,3),t(s,kt,12,0,3),l(kt,-1,kt),function(t,s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]){!function(t,s,i){let n=0;for(let t=0;t<4;++t)for(let e=t;e<4;++e)n=s[4*e+t],i[4*e+t]=s[4*t+e],i[4*t+e]=n}(0,t,s)}(s,this.view),this.view[3]=this.view[7]=this.view[11]=0,t(d(this.view,kt,kt),this.view,0,12,3)}},Ts=new class{touch=!1;paused=!0;dir=a();touches={};jt={};constructor(t,s,i=Ft/4){this.canvas=t,this.Gt=s,this.w=i,this.reset(),document.addEventListener("pointerlockchange",this.lock)}start(){var t,s;this.paused&&(this.touch?(this.Bt(!0),null===(t=(s=document.body).requestFullscreen)||void 0===t||t.call(s),this.paused=!1):this.canvas.requestPointerLock())}pause(){this.touch?this.Bt(!1):document.exitPointerLock()}reset(){this.pause(),this.paused=!0,this.St=-(this._t=Ft/2)/12,this.Pt=!1,this.action=0}update(){const t=this.paused?0:this.action|function(t){var s,i;const n=null===(s=(i=navigator).getGamepads)||void 0===s?void 0:s.call(i)[0];let e=0;if(n){var o,h;(null!==(o=n.buttons[0])&&void 0!==o&&o.pressed||null!==(h=n.buttons[7])&&void 0!==h&&h.pressed)&&(e|=16);let s=n.axes[0]||0,i=n.axes[1]||0;s<-.3?e|=1:s>N&&(e|=2),i<-.3?e|=4:i>N&&(e|=8),s=n.axes[2]||0,i=n.axes[3]||0,t.Wt(Math.abs(s)>N?s/200:0,Math.abs(i)>N?i/200:0)}return e}(this);this.Pt=!!(16&t),this.dir[0]=(1&t?1:0)+(2&t?-1:0),this.dir[2]=(8&t?-1:0)+(4&t?1:0),this.dir[1]=0,w(this.dir,y(this._t,Nt),this.dir)}Wt(t,s){this._t=zt((this._t-t*this.w+Ft)%Ft,Ft/8*3,Ft/8*5),this.St=zt(this.St+s*this.w,-Ft/8,Ft/48)}Bt(t){this.Gt.hidden=!t;const s=(t?this.Gt.addEventListener:this.Gt.removeEventListener).bind(this.Gt),i=t?addEventListener:removeEventListener;s("touchstart",this.Yt),s("touchend",this.Qt),i("touchstart",this.Ut),i("touchend",this.Zt),i("touchmove",this.Ht)}lock=()=>{const t=(this.paused=document.pointerLockElement!==this.canvas)?removeEventListener:addEventListener;t("mousemove",this.Vt),t("mousedown",this.Xt),t("mouseup",this.$t),t("keydown",this.qt),t("keyup",this.Kt)};Vt=t=>{this.Wt(t.movementX/innerWidth,t.movementY/innerHeight)};Xt=t=>{t.preventDefault(),0===t.button&&(this.action=16|this.action)};$t=t=>{t.preventDefault(),0===t.button&&(this.action=-17&this.action)};Ht=t=>{for(let s=0;s<t.changedTouches.length;++s){const i=t.changedTouches.item(s),n=this.jt[i.identifier];if(!n)continue;const e=this.touches[n],o=(i.clientX-e[0])/innerWidth,h=(i.clientY-e[1])/innerHeight;1===n?(this.action=-16&this.action,o<-.02?this.action=1|this.action:o>.02&&(this.action=2|this.action),h<-.02?this.action=4|this.action:h>.02&&(this.action=8|this.action)):(this.Wt(o,h),e[0]=i.clientX,e[1]=i.clientY)}};Ut=t=>{for(let s=0;s<t.changedTouches.length;++s){const i=t.changedTouches.item(s),n=i.clientX/innerWidth<.5?1:2;this.touches[n]||(this.touches[n]=[i.clientX,i.clientY],this.jt[i.identifier]=n)}};Zt=t=>{t.preventDefault();for(let s=0;s<t.changedTouches.length;++s){const i=t.changedTouches.item(s).identifier,n=this.jt[i];n&&(1===n&&(this.action=-16&this.action),delete this.touches[n],delete this.jt[i])}};Yt=t=>{t.preventDefault(),this.action=16|this.action};Qt=t=>{t.preventDefault(),this.action=-17&this.action};qt=t=>{t.preventDefault(),this.action=this.action|It(t.key)};Kt=t=>{t.preventDefault(),this.action=this.action&~It(t.key)}}(Ht,os),js=new _s(Os,Ds,Ts);ws(384,1/0,1,4,[-32,50,-52],[-30,52,-50],[-.1,-.1,-.1],[.1,.1,.1],[1,.95,.65,.5]),ws(384,1/0,7,.4,[-100,10,-100],[100,100,100],[0,0,0],[0,0,0],T),new Ct(Os).l={id:xs.gt};class Gs extends Ct{ts=0;ss=0;constructor(t,s,i,n,e,o){super(t),this.id=s,this.hp=e,this.Pt=o,this.body=Fs(this,i,n)}update(t){super.update(t),this.ts=(this.ts+t)%(2*Math.PI),this.ss=Math.max(0,this.ss-t),this.hp&&!this.ss&&Math.random()<t/10*this.id&&(this.ss=this.Pt,this.ns())}ns(){}detach(){super.detach(),ws(32,.2,.4,.3,[this.body.t[0]+this.body.shape.min[0],this.body.t[1]+this.body.shape.min[1],this.body.t[2]+this.body.shape.min[2]],[this.body.t[0]+this.body.shape.max[0],this.body.t[1]+this.body.shape.max[1],this.body.t[2]+this.body.shape.max[2]],[-10,-10,-10],[10,10,10],T),ws(64,.2,.4,.2,[this.body.t[0]+this.body.shape.min[0],this.body.t[1]+this.body.shape.min[1],this.body.t[2]+this.body.shape.min[2]],[this.body.t[0]+this.body.shape.max[0],this.body.t[1]+this.body.shape.max[1],this.body.t[2]+this.body.shape.max[2]],[-10,-10,-10],[10,10,10],j)}}class Bs extends Gs{constructor(t,s=0,i=1){super(t,1+s,O,!0,i,5),this.es=s,new Ct(this).l={id:s?xs.xt:xs.eye},new Ct(this).l={id:xs.At},new Ct(this).l={id:xs.At}}update(t){const s=-3*this.ts;u(this.u[0].h,0,-.1*Math.cos(2*s),0),u(this.u[1].h,-.35,Math.max(.1,.1*(1+Math.sin(s))),.25+.1*Math.cos(s)),u(this.u[2].h,.35,Math.max(.1,.1*(1+Math.sin(s+Math.PI))),.25+.1*Math.cos(s+Math.PI)),super.update(t)}ns(){if(this.es){const t=new Ss(Js,j,!1);u(t.body.t,this.o[12],this.o[13]+1,this.o[14]),u(t.body.zt,0,0,10)}}}class Ws extends Gs{constructor(t,s=0,i=1){super(t,3+s,R,!1,i,3),this.es=s;const n=this.root=new Ct(this);n.l={id:s?xs.xt:xs.eye},new Ct(n).l={id:xs.Ct},new Ct(n).l={id:xs.Ct}}update(t){const s=Math.abs(Math.sin(-3*this.ts));u(this.root.h,0,3-Math.cos(s),0),p([1,0,0],zt(Math.atan2(this.o[13]+2-js.o[13],js.o[14]-this.o[14]+.5),0,Math.PI/3),this.root.r),p([0,1,0],-Math.PI*s/3,this.root.u[0].r),p([0,1,0],Math.PI*(1+s/3),this.root.u[1].r),super.update(t)}ns(){if(this.es){const t=new Ss(Js,j,!1);u(t.body.t,this.o[12],this.o[13]+3,this.o[14]);const s=u(t.body.zt,0,0,10);w(s,this.root.r,s)}}}class Ys extends Gs{constructor(t,s=1){super(t,5,J,!0,s,0),this.l={id:xs.bt}}ns(){const t=new Ss(Js,B,!1,.75);u(t.body.t,this.o[12],this.o[13]+1,this.o[14]),u(t.body.zt,0,0,50)}}const Qs=new Ct(Os),Us=new Ws(Qs,1,0),Zs=new Ws(Qs,0,0),Hs=new Bs(Qs,0,0),Vs=new Bs(Qs,1,0);u(Us.body.t,5,5,32),u(Zs.body.t,-7,4,30),u(Hs.body.t,3,0,20),u(Vs.body.t,-2.5,0,28),p([0,1,0],-Math.PI/8,Us.r),p([0,1,0],Math.PI/8,Zs.r),p([0,1,0],-Math.PI/12,Hs.r),p([0,1,0],Math.PI/12,Vs.r);let Xs=0,$s=0;try{const t=JSON.parse(localStorage.getItem(F)||"{}");Xs=+((null==t?void 0:t.s)||0),$s=+((null==t?void 0:t.w)||0)}catch(t){}let qs=!0;function Ks(){Ds.Rt=(Ht.width=innerWidth)/(Ht.height=innerHeight)}function ti(){Ts.start()}Ks(),addEventListener("resize",Ks),Xt.addEventListener("touchend",(t=>{t.preventDefault(),Is(),bt(!0)})),Xt.addEventListener("click",(()=>{Is(),bt(!1)})),qt.addEventListener("click",(()=>{gt({beg:!wt.beg})})),$t.addEventListener("click",(()=>{gt({coil:!wt.coil})})),ss.addEventListener("click",(()=>{qs&&(qs=!1,Ht.toBlob((t=>{fetch("https://api.nft.storage/upload",{method:"POST",headers:new Headers({Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJkaWQ6ZXRocjoweEZlQTM2YTllQTRCNDVmNGY5MjBlNDA5N2MxZUQ2MEM2Q2UzNEY2MkYiLCJpc3MiOiJuZnQtc3RvcmFnZSIsImlhdCI6MTYzMDAzNjE1MzY3OCwibmFtZSI6IkpTMTNLMjAyMSJ9.DoVXYaDRFyE8vDSjmCmN2-E13jGl1muuAUyekJB0JXs"}),body:t}).then((t=>t.json())).then((t=>{open(`https://cloudflare-ipfs.com/ipfs/${t.value.cid}`,"_blank"),qs=!0}))})))})),yt.push(((t,s,i)=>{(i||t.scr!==s.scr)&&(Vt.hidden=1!==t.scr,ts.hidden=2!==t.scr,ns.hidden=2!==t.scr,Qs.hide=2===t.scr,1===t.scr&&(is.innerText=`HISCORE ${Xs}`),2===t.scr&&((Ts.touch=t.touch)||addEventListener("mouseup",ti),ti()),4===t.scr&&(Ts.reset(),!t.touch&&removeEventListener("mouseup",ti),function(t,s){try{localStorage.setItem(F,JSON.stringify({s:Xs=Math.max(Xs,t),w:$s=Math.max($s,s)}))}catch(t){}}(t.score,t.wave),gt({scr:1,beg:$s<pt.length&&t.beg}))),t.sub&&(es.hidden=!1,$t.hidden=!1,!i&&s.sub&&t.coil===s.coil||($t.innerText=(t.coil?"‚òë":"‚òê")+" COIL WEAPON",js.It.l.id=t.coil?xs.coil:xs.wand)),(i||t.beg!==s.beg)&&(qt.innerText=(t.beg?"‚òë":"‚òê")+" BEGINNER"),t.score!==s.score&&2===t.scr&&(is.innerText=`SCORE ${t.score}`),t.hp!==s.hp&&(ns.innerText=t.hp?`LIVES ${Array(0|t.hp).fill("‚¨§").join(" ")}`:"",t.hp<s.hp&&(Kt.classList.add("hit"),setTimeout((()=>Kt.classList.remove("hit")),100)))}));let si=0,ii=-1.5,ni=0;yt.push(((t,s,i)=>{(i||t.scr!==s.scr)&&(2===t.scr?js.hp=t.hp:(u(js.body.t,0,0,45),u(js.body.zt,0,0,0),Js.u.length=0,Rs.u.length=0))}));const ei=[],oi=[];let hi=0;function ri(t,s){const i=t.node,n=s.node;n instanceof Ss?!n.Ft&&i instanceof _s?(Ls(),js.hp-=n.hp,n.detach()):n.Ft&&i instanceof Gs?((i.hp-=n.hp)<=0&&i.detach(),Ls(),n.detach(),js.Nt=0,gt({score:wt.score+1})):i instanceof Ss&&i.Ft!==n.Ft&&(i.detach(),n.detach(),Ls(),js.Nt=0):n instanceof Gs&&i instanceof _s&&(Ls(),js.hp--,n.detach())}function ci(t){return t<3?new Bs(Rs,1&t):t<5?new Ws(Rs,1&t):new Ys(Rs)}var ai;requestAnimationFrame((function s(i){requestAnimationFrame(s),i/=1e3;const n=hi?i-hi:0;hi=i,2===wt.scr&&(function(t){if(!si&&!Rs.u.length){si=1;const t=wt.wave+1;wt.beg&&t<=pt.length?js.hp=5:!t||t%4||(js.hp=Math.min(5,js.hp+2)),gt({wave:t})}si&&!(si=Math.max(0,si-t))&&function(t){for(let s=0;s<t.length;++s)for(let i=0;i<t[s].length;++i)for(let n=0;n<11;++n){const e=t[s][t[s].length-i-1][n];if(!e)continue;const o=ci(e);u(o.body.t,3*(n-5),3*i+(e<3||5===e?20:0),Math.min(15,wt.wave/2|0)-6*s-i),e<3&&u(o.body.zt,0,0,1)}}(wt.beg&&wt.wave<pt.length?pt[wt.wave]:wt.wave%4==3?Mt[(wt.wave<4*(wt.beg?2:1)?2:Mt.length)*Math.random()|0]:function(){const t=[];for(let s=0;s<5;++s){const s=[];for(let t=0;t<4;++t)s.push([]);t.push(s)}const s=22+Math.min(33,(wt.wave+5)*Math.random()|0);for(let i=0,n=0;i<s&&n<256;++n){const s=5*gs(2)|0,n=4*gs()|0,e=11*(Math.random()<.4?Math.random():gs())|0;if(t[s][n][e])continue;const o=Math.random();t[s][n][e]=o<.05?5:o<.15?1:o<.3?2:o<.65?3:4,++i}return t}())}(n),function(t){ni=Math.max(0,ni-t);let s=20,i=-20;for(const t of Rs.u)3!==t.id&&4!==t.id||(s=Math.min(s,t.o[12]),i=Math.max(i,t.o[12])),t.o[14]>45&&(Ls(),js.hp=0);(ii<0&&s<=-20||ii>0&&i>=20)&&(ii*=-1,ni=4);for(const t of Rs.u)3!==t.id&&4!==t.id||u(t.body.zt,ii,0,ni?1:0)}(n),wt.hp!==js.hp&&gt({scr:js.hp<=0?4:2,hp:Math.max(js.hp,0)})),ei.length=oi.length=0,At(Os,(t=>{t.body&&ei.push(t.body),t.l&&oi.push(t.l)})),function(t,s,i){for(const i of s)if(1&i.kt&&(l(P,t,Cs),f(i.zt,Cs,i.zt)),l(i.zt,t,Cs),f(i.t,Cs,i.t),1&i.kt){for(let t=0;t<3;++t)i.t[t]=zt(i.t[t],I[t],L[t]),i.bound&&(i.t[t]=zt(i.t[t],i.bound.min[t],i.bound.max[t]));i.t[1]===I[1]&&(i.zt[1]=0)}for(let t=0;t<s.length;++t)if(2&s[t].kt){E(s[t].shape,g(s[t].t,As),ks);for(let n=0;n<s.length;++n)t!=n&&(E(s[n].shape,g(s[n].t,As),zs),Es(ks,zs)&&(null==i||i(s[t],s[n])))}}(n,ei,ri),Os.update(n);const e=hs.Z(rs);(function(s,i,n){o(i.Ot,i.view,as);for(const t of ds)t.yt=0;n.sort(((t,s)=>t.id-s.id));for(const s of n){const i=ds[s.id];t(s.o||cs,i.Mt,0,16*i.yt++)}s.W(fs).at([{name:"vp",values:as},{name:"p",values:i.t},{name:"f",values:D}]);for(const t of ds)t.yt&&(t.wt.data(t.Mt),s.ct(0,t.dt).ct(1,t.wt).index(t.vt).lt(t.count,t.yt))})(e,Ds,oi),function(s,i,n){if(!ms.length)return;o(i.Ot,i.view,as),s.W(ls).ct(0,ps).at([{name:"vp",values:as},{name:"vw",value:Ht.width},{name:"ct",value:n}]);let e=0;for(let s=0;s<ms.length;){const i=ms[s];n>(i.s=i.s||n)+i.h?(ms[s]=ms[ms.length-1],ms.pop()):(e+i.d.length<=vs.length&&(t(i.d,vs,0,e,i.d.length),e+=i.d.length),++s)}ps.data(vs),s.ft(e/12)}(e,Ds,i),e.end()})),null===(ai=document.monetization)||void 0===ai||ai.addEventListener("monetizationstart",(()=>{gt({sub:!0,coil:!0})})),gt(wt,!0)})();</script></body></html>