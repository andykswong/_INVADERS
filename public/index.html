<!doctype html><html><head><meta charset="utf-8"><meta name="monetization" content="$ilp.uphold.com/NanhqQLkB9Y9"><title>_INVADERS</title><style>*{margin:0;padding:0;box-sizing:border-box;color:#eee;font:28px "Arial Black",sans-serif}b,body,html,nav,span{transition:all .1s;background:0 0;overflow:hidden;position:absolute;display:flex;flex-direction:column;justify-content:center;align-items:center;user-select:none}b,body,html,span{width:100%;height:100%}div{width:100%;display:flex}h1{font-size:2.5em}h6{font-size:.7em;color:#aaa}a:active,a:hover{background:#fff}a{color:#444;background:#ddd;margin-top:.7em;width:100%;line-height:2em;text-align:center}input{margin-top:.7em;width:100%;background:0 0;border:none;border-bottom:3px solid #ddd}p{position:absolute;display:block}#h{top:0;left:.4em}#s{top:0;right:.4em}#r{left:.4em;bottom:.2em}#c{right:.4em;bottom:.2em}#a{opacity:.4;border:2px solid #ccc;border-radius:50%;bottom:20%;right:15%;width:2em;line-height:2em;text-align:center}.hit{background:#6e2727}[hidden]{display:none}</style></head><body><span hidden>‚úõ</span><b></b><nav><h1>_INVADERS</h1><a>START</a><a>CO-OP</a><a hidden></a><a></a></nav><nav hidden><h1>_INVADERS</h1><h6></h6><a>BACK</a><input placeholder="OFFER"><input placeholder="ANSWER"><div><a>HOST</a><pre> </pre><a>JOIN</a></div><a>START</a></nav><p id="r">üì∑</p><p id="s"></p><p hidden id="h"></p><p hidden id="c">ùíû</p><p hidden id="a">A</p><canvas></canvas><script>function t(t,e,i=0,s=0,h=t.length-i){for(let r=0;r<h;++r)e[s+r]=t[i+r];return e}function e(t,e,i){for(let s=0;s<t.length;++s)i[s]=t[s]*e;return i}function i(t,e,i,s){let h=e.length/t,r=i.length/t,n=0;for(let o=0;o<r;++o)for(let r=0;r<h;++r){n=0;for(let s=0;s<t;++s)n+=e[s*h+r]*i[o*t+s];s[o*h+r]=n}return s}let s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function h(t){for(let e=0;e<16;++e)t[e]=e%5?0:1;return t}function r(e,h,r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]){return t(i(4,e,h,s),r)}function n(t=0,e=0,i=0,s=0){return[t,e,i,s]}n(),c();let o=n(),a=n();function c(t=0,e=0,i=0){return[t,e,i]}function u(t,e=0,i=0,s=0){return t[0]=e,t[1]=i,t[2]=s,t}function l(t,e,i=c()){return((t,e,i)=>{for(let s=0;s<t.length;++s)i[s]=t[s]+e[s];return i})(t,e,i)}function f(t,i,s=c()){return e(t,i,s)}function m(e,s,h=c()){return((t,e=0,i=0,s=0,h=0)=>{t[0]=e,t[1]=i,t[2]=s,t[3]=h})(o,s[0],s[1],s[2],1),t(i(4,e,o,a),h,0,0,3)}let d=[0,0,0,1],p=[0,0,0,1];function v(t,i,s=[0,0,0,1]){return e(t,Math.sin(i/2),s),s[3]=Math.cos(i/2),s}function M(t,e,i=[0,0,0,1]){let s=t[0],h=t[1],r=t[2],n=t[3],o=e[0],a=e[1],c=e[2],u=e[3];return i[0]=n*o+s*u+h*c-r*a,i[1]=n*a+h*u+r*o-s*c,i[2]=n*c+r*u+s*a-h*o,i[3]=n*u-s*o-h*a-r*c,i}function w(e,i,s=c()){return t(e,d,0,0,3),d[3]=0,M(M(i,d,d),((t,e=[0,0,0,1])=>{let i=1/((t=>Math.sqrt(((t,e)=>{let i=0;for(let s=0;s<t.length;++s)i+=t[s]*e[s];return i})(t,t)))(t)||1);return e[0]=-t[0]*i,e[1]=-t[1]*i,e[2]=-t[2]*i,e[3]=t[3]*i,e})(i,p),d),t(d,s,0,0,3)}function g(e,i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]){return h(i),t(e,i,0,12,3),i}function y(t,e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]){return h(e),e[0]=t[0],e[5]=t[1],e[10]=t[2],e}function b(t,e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]){return((t,e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])=>{let i=t[0]*t[0],s=t[0]*t[1],h=t[0]*t[2],r=t[1]*t[1],n=t[1]*t[2],o=t[2]*t[2],a=t[3]*t[0],c=t[3]*t[1],u=t[3]*t[2];return e[0]=1-2*(r+o),e[1]=2*(s+u),e[2]=2*(h-c),e[4]=2*(s-u),e[5]=1-2*(i+o),e[6]=2*(n+a),e[8]=2*(h+c),e[9]=2*(n-a),e[10]=1-2*(i+r),e[3]=e[7]=e[11]=e[12]=e[13]=e[14]=0,e[15]=1,e})(t,e)}c(),c(),c();class C{constructor(t,e){this.min=t,this.max=e}}let N=c(),x=c(),A=(t=c(),e=c())=>new C(t,e);function k(e,i,s=A()){for(let t=0;t<3;++t){N[t]=i[12+t],x[t]=i[12+t];for(let s=0;s<3;++s){let h=e.min[s]*i[4*s+t],r=e.max[s]*i[4*s+t];N[t]+=Math.min(h,r),x[t]+=Math.max(h,r)}}return t(N,s.min),t(x,s.max),s}let S=[-20,0,-50],z=[20,50,50],O=[0,-15,0],T=A([-.5,0,-.5],[.5,2,.5]),E=A([-16,0,30],[16,0,50]),F=A([-.5,0,-.5],[.5,1.5,.5]),I=A([-.6,2.4,-.6],[.6,3.6,.6]),P=A([-.6,.4,-.6],[.6,1.6,.6]),J=[.13,.16,.18,1],R=[.92,.92,.92,.5],D=[.3,.15,.15,.5],L=[.89,.38,.17,.5],_=[.53,.84,.96,.7],j=[.95,.85,.45,.7],G=[.94,.87,.71,1],B=[.18,.13,.18,1],W=[.18,.13,.18,3],Y=[.18,.15,.15,3],H=[.29,.69,.78,1],Q=[.78,.74,.68,-.5];function U(t,e){for(let i of t.i)m(e,i,i);return t}function V(t,e){let i=t.i.length;for(let i of e.i)t.i.push([...i]);for(let i of e.c)t.c.push([...i]);for(let s of e.o)t.o.push([s[0]+i,s[1]+i,s[2]+i]);return t}function Z(t,e,i,s){return{i:[[-t,+e,+i],[+t,+e,+i],[+t,-e,+i],[-t,-e,+i],[+t,+e,-i],[-t,+e,-i],[-t,-e,-i],[+t,-e,-i]],o:[[2,1,0],[2,0,3],[6,5,4],[6,4,7],[7,4,1],[7,1,2],[3,0,5],[3,5,6],[1,4,5],[1,5,0],[6,7,2],[3,6,2]],c:[,,,,,,,,].fill(s)}}function X(t,e){return b(v(t,e))}let q=U(Z(100,.05,100,G),g([0,-.05,0])),K=Z(.5,.5,.4,R);V(K,U(Z(.3,.3,.2,H),g([0,0,.25]))),V(K,U(Z(.15,.15,.2,W),g([0,0,.28]))),U(K,g([0,1,0]));let $=Z(.5,.5,.4,R);V($,U(Z(.3,.3,.2,[.84,.23,.18,1]),g([0,0,.25]))),V($,U(Z(.15,.15,.2,W),g([0,0,.28]))),U($,g([0,1,0]));let tt=U(U(Z(.6,.1,.05,B),X([0,0,1],-Math.PI/6)),g([-1,.7,0]));V(tt,U(U(Z(.6,.1,.03,B),X([0,0,1],Math.PI/4)),g([-1.8,.5,0]))),V(tt,U(U(Z(.5,.1,.02,B),X([0,0,1],Math.PI/4)),g([-1.5,.4,0]))),V(tt,U(U(Z(.4,.1,.01,B),X([0,0,1],Math.PI/4)),g([-1.2,.3,0]))),U(tt,g([0,1,0]));let et=V({i:[],o:[],c:[]},$),it=U(U(U(Z(.5,.5,.5,B),X([0,0,1],Math.PI/4)),X([1,0,0],Math.PI/4)),g([0,0,-.5]));V(it,U(U(U(Z(.5,.5,.5,B),X([0,0,1],-Math.PI/4)),X([1,0,0],-Math.PI/4)),g([0,0,-.5]))),U(it,g([0,1,0])),V(et,it);let st=Z(.2,.1,.3,B),ht=Z(.4,.4,.4,G),rt=Z(.3,.3,.3,H);U(ht,g([0,1.7,0])),U(rt,g([0,.7,0])),V(ht,rt);let nt=Z(.1,.1,.1,[.89,.38,.17,-.95]);U(nt,X([0,0,1],Math.PI/4)),U(nt,y([1,1.5,.38])),U(nt,g([0,.95,0])),V(nt,Z(.04,.8,.04,Y));let ot={i:[],o:[],c:[]};V(ot,U(Z(.1,.012,.012,Q),g([0,0,-.105]))),V(ot,U(Z(.12,.01,.012,Q),g([0,0,.105]))),V(ot,U(Z(.01,.01,.12,Q),g([-.105,0,0]))),V(ot,U(Z(.01,.01,.12,Q),g([.105,0,0])));let at=V({i:[],o:[],c:[]},ot);U(ot,y([.8,1,.8])),U(ot,g([0,.09,0])),V(at,ot),U(ot,y([.8,1,.8])),U(ot,g([0,.09,0])),V(at,ot),V(at,U(Z(.07,.07,.07,[.95,.85,.45,-.9]),g([0,.35,0]))),U(at,g([0,.5,0])),U(at,X([0,1,0],Math.PI/24)),V(at,Z(.015,.8,.015,Y));let ct=[1.12,,219,.02,.06,0,3,1.27,-6.6,,,,.04,,,,,.88,.03,.3],ut=[1.31,,126,,.07,.22,4,.29,1.5,,,,.07,.2,,.3,,.76],lt=(t,...e)=>{let i=t.createBufferSource(),s=t.createBuffer(e.length,e[0].length,44100);return e.map(((t,e)=>s.getChannelData(e).set(t))),i.buffer=s,i},ft=(t=1,e=.05,i=220,s=0,h=0,r=.1,n=0,o=1,a=0,c=0,u=0,l=0,f=0,m=0,d=0,p=0,v=0,M=1,w=0,g=0)=>{let y,b,C=2*Math.PI,N=a*=500*C/44100**2,x=(0<d?1:-1)*C/4,A=i*=(1+2*e*Math.random()-e)*C/44100,k=[],S=0,z=0,O=0,T=1,E=0,F=0,I=0;for(c*=500*C/44100**3,d*=C/44100,u*=C/44100,l*=44100,f=44100*f|0,b=(s=99+44100*s)+(w*=44100)+(h*=44100)+(r*=44100)+(v*=44100)|0;O<b;k[O++]=I)++F%(100*p|0)||(I=n?1<n?2<n?3<n?Math.sin((S%C)**3):Math.max(Math.min(Math.tan(S),1),-1):1-(2*S/C%2+2)%2:1-4*Math.abs(Math.round(S/C)-S/C):Math.sin(S),I=(f?1-g+g*Math.sin(2*Math.PI*O/f):1)*(0<I?1:-1)*Math.abs(I)**o*t*.3*(O<s?O/s:O<s+w?1-(O-s)/w*(1-M):O<s+w+h?M:O<b-v?(b-O-v)/r*M:0),I=v?I/2+(v>O?0:(O<b-v?1:(b-O)/v)*k[O-v|0]/2):I),y=(i+=a+=c)*Math.sin(z*d-x),S+=y-y*m*(1-1e9*(Math.sin(O)+1)%2),z+=y-y*m*(1-1e9*(Math.sin(O)**2+1)%2),T&&++T>l&&(i+=u,A+=u,T=0),!f||++E%f||(i=A,a=N,T=T||1);return k},mt=(t,...e)=>lt(t,ft(...e)),dt=((t,e,i,s=125)=>{let h,r,n,o,a,c,u,l,f,m,d,p,v,M,w,g=0,y=[],b=[],C=[],N=0,x=0,A=1,k={},S=44100/s*60>>2;for(;A;N++)y=[A=l=d=v=0],i.map(((s,d)=>{for(u=e[s][N]||[0,0,0],A|=!!e[s][N],w=v+(e[s][0].length-2-!l)*S,M=d==i.length-1,r=2,o=v;r<u.length+M;l=++r){for(a=u[r],f=r==u.length+M-1&&M||m!=(u[0]||0)|a|0,n=0;n<S&&l;n++>S-99&&f?p+=(p<1)/99:0)c=(1-p)*y[g++]/2||0,b[o]=(b[o]||0)-c*x+c,C[o]=(C[o++]||0)+c*x+c;a&&(p=a%1,x=u[1]||0,(a|=0)&&(y=k[[m=u[g=0]||0,a]]=k[[m,a]]||(h=[...t[m]],h[2]*=2**((a-12)/12),a>0?ft(...h):[])))}v=w}));return[b,C]})([[.75,0,386,,,.25,2],[.75,0,386,,,.25,2]],[[[1,-.4,20,,,,,,,,,,18,,16,,,,18,,,,,,,,,,,,16,,18,,20,,,,,,25,,,,20,,18,,,,18,,,,,,,,,,,,16,,15,,],[,.3,13,,,,25,,13,,,,13,,25,,,,13,,,,25,,13,,,,13,,25,,,,13,,,,25,,13,,,,13,,25,,,,6,,,,18,,6,,,,6,,18,,,,]],[[1,-.3,16,,,,,,,,18,,,,20,,,,25,,,,,,22,20,22,,,,25,,,,,,,,,,,,,,,,,,,,24,,,,,,,,,,24,,25,,27,,],[,.3,13,,,,25,,13,,,,13,,25,,,,10,,,,22,,10,,,,10,,22,,,,10,,,,22,,10,,,,10,,22,,,,8,,,,20,,8,,,,8,,20,,23,,]],[[1,-.3,27,,,,,,,,32,,,,27,,32,,30,,,,32,,30,,27,,30,,27,,30,,32,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],[,.3,8,,20,8,18,20,,,8,,20,8,18,20,,,11,,23,11,21,23,,,11,,23,11,21,23,,,13,,25,13,23,25,,,13,,25,13,23,25,,,13,,25,13,23,25,,,28,,25,,23,,25,,]]],[0,1,2]),pt=[[[[,,,,,4,,,,,],[,,,,4,4,,,,,],[,,,,,4,,,,,],[,,,,,4,,,,,],[,,,,4,4,4,,,,]]],[[[4,4,4,,,,,,4,3,4],[,3,,,,,,,4,,4],[,3,,,,,,,4,3,4]],[[,,,3,,,,3,,,],[,,,4,,4,,4,,,],[,,,,3,,3,,,,]]],[[[,,,,2,2,2,,,,]],[[4,4,4,,4,4,3,,,3],[,4,,,3,,,,,4],[,3,,2,4,,,2,,4]],[[3,3,3,,4,3,4,,,4],[,4,,,4,,,,,3],[,4,2,1,4,2,,1,2,4]],[[4,4,4,,3,4,3,,,4],[,3,,,4,,,,,4],[1,4,,,4,,,,,4,1]],[[2,2,,2,,1,,2,,2,2]]],[[[,,1,5,5,,5,5,1,,]],[[,,,,4,,4,,,,],[,,,,3,,3,,,,],[,,,,4,3,4,3,,,],[5,5,2,,,,3,,2,5,5]],[[,,,,3,,3,,,,],[,,,,4,,4,,,,],[,,,,3,4,3,4,,,],[5,5,1,,,,4,,1,5,5]]]],vt=[[[[,,,3,,,,3,,,],[,,,,4,4,4,,,,],[,,,4,3,4,3,4,,,],[,,3,4,4,4,4,4,3,,],[,,3,,,,,,3,,],[2,,,3,3,,3,3,,,2]],[[,,,,3,,3,,,,],[,,,,4,4,4,,,,],[,,,4,4,4,4,4,,,],[,3,4,4,4,3,4,4,4,3],[5,3,,4,,,,4,,3,5],[2,2,,3,,,,3,,2,2]],[[],[,,,,4,4,4,,,,],[,,,4,4,4,4,4,,,],[,,,,4,4,4,,,,],[],[,5,2,5,,,,5,2,5]]],[[[2,1,,,,,,,,1,2]],[[1,2,,,,,,,,2,1]],[[,,,4,4,4,4,4,,,],[,,4,,,4,,,4,,],[,,4,,,4,,,4,,],[,,4,4,4,4,4,4,4,,],[,,,4,,,,4,,,],[5,5,,,4,4,4,,,5,5]],[[,,,,4,4,4,,,,],[,,,3,3,4,3,3,,,],[,,,3,3,4,3,3,,,],[,,,3,4,4,4,3,,,],[,,,,3,3,3,,,,],[5,5,,,4,,4,,,5,5]],[[],[,,,,3,4,3,,,,],[,,,,3,4,3,,,,],[,,,,4,4,4,,,,],[,,,,4,3,4,,,,],[,,5,5,,,,5,5,,]]],[[[],[],[],[,3,,,,,,,,3],[3,,3,,,,,,3,,3],[,3,,,,,,,,3],[5,,5,,5,,5,,5,,5]],[[],[],[],[3,4,3,,,,,,3,4,3],[4,3,4,,,,,,4,3,4],[3,4,3,,,,,,3,4,3],[,5,,5,,,,5,,5]],[[],[,,,,,4,,,,,],[,,,,3,4,3,,,,],[,3,3,,4,4,4,,3,3],[3,4,3,,,,,,3,4,3],[,3,3,,,,,,3,3],[5,,5,,5,,5,,5,,5]],[[,,3,4,,,,4,3,,],[,,3,,3,4,3,,3,,],[,,,,3,4,3,,,,],[,,,,4,3,4,,,,],[],[],[,5,,5,,,,5,,5]],[[,,,,,,,,,,],[,,,4,3,4,3,4,,,],[,,,,4,3,4,,,,],[,,,,,4,,,,,],[],[],[5,,5,,5,,5,,5,,5]]],[[],[[2,1,,,,,,,,2,1]],[[,,,,4,4,4,,,,],[,4,,4,4,3,4,4,,4],[,,4,4,3,3,3,4,4,,],[,,,4,4,3,4,4,,,],[1,2,,,4,4,4,,,1,2]],[[4,,,,3,4,3,,,,4],[4,4,,3,4,4,4,3,,4,4],[4,,,4,4,4,4,4,,,4],[,,,3,4,4,4,3,,,],[2,1,,,3,4,3,,,2,1]],[[,,,,4,4,4,,,,],[,,,4,3,4,3,4,,,],[,,,4,4,3,4,4,,,],[,,,4,3,4,3,4,,,],[,5,,,4,4,4,,,5]],[[,,,,4,3,4,,,,],[,,,4,4,4,4,4,,,],[,,,3,4,4,4,3,,,],[,,,4,4,4,4,4,,,],[5,5,5,,4,3,4,,5,5,5]]]],Mt={scr:1,touch:!1,sub:!1,coil:!1,p2p:!1,host:!0,beg:!0,hp:0,score:0,wave:-1},wt=[];function gt(t,e=!1){let i=Mt;Mt={...Mt,...t};for(let t of wt)t(Mt,i,e)}function yt(t,e=!1){gt({scr:4,hp:3+(Mt.coil?1:0),score:0,wave:-1,touch:t,p2p:e,host:!e||Mt.host,beg:!e&&Mt.beg})}class bt{u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];t=c();r=[0,0,0,1];m=[];constructor(t=null){(this.parent=t)&&t.m.push(this)}detach(){if(this.parent){let t=this.parent.m,e=t.indexOf(this);e>=0&&(t[e]=t[t.length-1],t.pop())}}update(e){if(!this.hide){this.body&&t(this.body.i,this.t),b(this.r,this.u),t(this.t,this.u,0,12,3),this.parent&&r(this.parent.u,this.u,this.u),this.v&&(this.v.u=this.u),this.M&&this.M.update(this.u);for(let t of this.m)t.update(e)}}}function Ct(t,e){if(!t.hide){e(t);for(let i of t.m)Ct(i,e)}}function Nt(t,e,i){return t<e?e:t>i?i:t}function xt(t,e,i){return t*(1-i)+e*i}let At=2*Math.PI,kt=[0,0,0,1];function St(t){switch(t){case"ArrowUp":case"w":return 4;case"ArrowDown":case"s":return 8;case"ArrowLeft":case"a":return 1;case"ArrowRight":case"d":return 2;case"Enter":case"e":return 16}return 0}let zt=[5126,5120,5121,5122,5123],Ot=[4,1,1,2,2];function Tt(t){return Ot[255&t]*Et(t)}function Et(t){return t>>8&255}function Ft(t){return zt[255&t]}function It(t){return!!(t>>16)}function Pt(t){return t-5123+2}class Jt{constructor(t,e){this.g=t,this.C={type:34962,N:35044,...e},t.bindBuffer(this.C.type,this.A=t.createBuffer()),t.bufferData(this.C.type,this.C.size,this.C.N)}data(t,e=0){return this.g.bindBuffer(this.C.type,this.A),this.g.bufferSubData(this.C.type,e,t),this}}class Rt{constructor(t,e){this.g=t;let i=this.k=t.createShader(this.type=e.type);t.shaderSource(i,this.source=e.source),t.compileShader(i)}}class Dt{constructor(t,e){this.g=t;let i=0;this.C={mode:4,S:5123,...e,O:e.O.map((({T:t,F:e,I:s=!1})=>{let h=Array(t.length),r=0;for(let e=0;e<t.length;++e,++i){let{name:s,format:n,offset:o=r,P:a=i}=t[e];h[e]={name:s,format:n,offset:o,P:a},r=Math.max(r,o)+Tt(n)}return{T:h,F:e||r,I:s}}))},this.J=((t,e,i,s)=>{let h=t.createProgram();t.attachShader(h,e.k),t.attachShader(h,i.k);for(let{T:e}of s)for(let i of e)t.bindAttribLocation(h,i.P,i.name);return t.linkProgram(h),h})(t,e.R,e.D,this.C.O)}}function Lt(t,e,i){i?t.enable(e):t.disable(e)}class _t{constructor(t){this.L=!1,this.g=t,this.canvas=t.canvas,this._=new jt(t,this.j("ANGLE_instanced_arrays"))}get width(){return this.g.drawingBufferWidth}get height(){return this.g.drawingBufferHeight}buffer(t){return new Jt(this.g,t)}G(t){return new Rt(this.g,t)}B(t){return new Dt(this.g,t)}W(t={}){return((t={})=>({C:t,Y:null,H(){}}))(t)}U(t){let e=this.width,i=this.height;this.g.viewport(0,0,e,i);let s=0;return t.C.clearColor&&(s|=16384,this.g.clearColor(...t.C.clearColor),this.g.colorMask(!0,!0,!0,!0)),isNaN(t.C.clearDepth)||(s|=256,this.g.clearDepth(t.C.clearDepth),this.g.depthMask(!0)),s&&this.g.clear(s),this._}j(t){return this.g.getExtension(t)}reset(){this._.reset()}}class jt{constructor(t,e){this.g=t,this.V=e,this.reset()}reset(){this.state={Z:null,X:0}}B(t){if(this.state.Z!==t){this.state.Z=t,this.g.useProgram(t.J),((t,e,i=0)=>{let{q:s,K:h,$:r}=e;if(e.tt,Lt(t,2929,!!h),h&&(t.depthMask(!!h.write),t.depthFunc(h.et||519)),Lt(t,3042,!!s),s){let e=s.colorMask||255;t.colorMask(!!(1&e),!!(2&e),!!(4&e),!!(8&e)),t.blendFuncSeparate(s.it||1,s.st||0,s.ht||1,s.rt||0),t.blendEquationSeparate(s.nt||32774,s.ot||32774)}})(this.g,t.C,this.state.X);for(let t=0;t<16;++t)this.g.disableVertexAttribArray(t);for(let{T:e}of t.C.O)for(let{P:t}of e)this.g.enableVertexAttribArray(t)}return this}index({A:t}){return this.g.bindBuffer(34963,t),this}at(t,{A:e}){let{T:i,F:s,I:h}=this.state.Z.C.O[t];this.g.bindBuffer(34962,e);for(let{format:t,offset:e,P:n}of i){var r;this.g.vertexAttribPointer(n,Et(t),Ft(t),It(t),s,e),null===(r=this.V)||void 0===r||r.vertexAttribDivisorANGLE(n,h?1:0)}return this}ct(t){for(let i of t){let t=this.g.getUniformLocation(this.state.Z.J,i.name);if(t)if(i.values){var e;switch(null===(e=this.state.Z.C.ct.find((t=>t.name===i.name)))||void 0===e?void 0:e.ut){case 35676:this.g.uniformMatrix4fv(t,!1,i.values);break;case 35675:this.g.uniformMatrix3fv(t,!1,i.values);break;case 35666:this.g.uniform4fv(t,i.values);break;case 35665:this.g.uniform3fv(t,i.values);break;case 35664:this.g.uniform2fv(t,i.values);break;default:this.g.uniform1fv(t,i.values)}}else isNaN(i.value)||this.g.uniform1f(t,i.value)}return this}lt(t,e=1,i=0){let{mode:s}=this.state.Z.C;var h;return e>1?null===(h=this.V)||void 0===h||h.drawArraysInstancedANGLE(s,i,t,e):this.g.drawArrays(s,i,t),this}ft(t,e=1,i=0){let{S:s,mode:h}=this.state.Z.C;var r;return e>1?null===(r=this.V)||void 0===r||r.drawElementsInstancedANGLE(h,t,s,i*Pt(s),e):this.g.drawElements(h,t,s,i*Pt(s)),this}end(){}}let Gt=document.getElementsByTagName.bind(document),Bt=Gt("canvas")[0],Wt=Gt("nav")[0],Yt=Gt("nav")[1],Ht=Gt("a")[0],Qt=Gt("a")[1],Ut=Gt("a")[2],Vt=Gt("a")[3],Zt=Gt("a")[4],Xt=Gt("a")[5],qt=Gt("a")[6],Kt=Gt("a")[7],$t=Gt("b")[0],te=Gt("span")[0],ee=Gt("p")[0],ie=Gt("p")[1],se=Gt("p")[2],he=Gt("p")[3],re=Gt("p")[4],ne=Gt("input")[0],oe=Gt("input")[1],ae=Gt("h6")[0],ce=((t,e)=>{let i=t.getContext("webgl",{preserveDrawingBuffer:!0});return i?new _t(i):null})(Bt);ce.j("OES_standard_derivatives");let ue=ce.W({clearColor:J,clearDepth:1}),le=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],fe=c(),me=ce.B({R:ce.G({type:35633,source:"uniform mat4 vp;attribute vec4 pos,c,m1,m2,m3,m4;varying vec3 vPos;varying vec4 vC;void main(){vec4 v=mat4(m1,m2,m3,m4)*pos;vPos=v.xyz;vC=c;gl_Position=vp*v;}"}),D:ce.G({type:35632,source:"#extension GL_OES_standard_derivatives:require\nprecision mediump float;uniform vec3 p;uniform vec4 f;varying vec3 vPos;varying vec4 vC;void main(){vec3 v=-vec3(.41,.82,.41),m=normalize(cross(dFdx(vPos),dFdy(vPos))),s=normalize(v+normalize(p-vPos));float d=mix(min(max(dot(m,v),0.)+pow(max(dot(m,s),0.),abs(vC.w)),1.),1.,abs(vC.w)*step(0.,-vC.w)),a=max(smoothstep(10.,80.,length(p-vPos)),max(smoothstep(15.,22.,abs(vPos.x)),smoothstep(45.,60.,abs(vPos.z))));gl_FragColor=vec4(mix(vC.xyz*max(d,.25),f.xyz,a),1.);}"}),O:[{T:[{name:"pos",format:768},{name:"c",format:1024}]},{T:[{name:"m1",format:1024},{name:"m2",format:1024},{name:"m3",format:1024},{name:"m4",format:1024}],I:!0}],ct:[{name:"vp",ut:35676},{name:"p",ut:35665},{name:"f",ut:35666}],K:{et:515,write:!0}}),de=ce.B({R:ce.G({type:35633,source:"uniform mat4 vp;uniform float vw,ct;attribute vec4 p,v,c;attribute float t,s;varying vec4 vC;void main(){vC=vec4(c.xyz,c.w*(1.-mod(ct,t)/t/2.)),gl_Position=vp*vec4((p+mod(ct,t)*v).xyz,1.),gl_PointSize=vw/gl_Position.w*(1.-mod(ct,t)/t)*s;}"}),D:ce.G({type:35632,source:"precision mediump float;varying vec4 vC;void main(){gl_FragColor=vec4(vC.xyz,smoothstep(1.,0.,length(2.*gl_PointCoord.xy-vec2(1.)))*vC.w);}"}),O:[{T:[{name:"p",format:768},{name:"v",format:768},{name:"t",format:256},{name:"s",format:256},{name:"c",format:1024}]}],ct:[{name:"vp",ut:35676},{name:"vw"},{name:"ct"}],K:{et:515,write:!1},q:{it:770,ht:1,st:771,rt:771},mode:0}),pe=[],ve=[],Me=new Float32Array(73728),we=ce.buffer({N:35040,size:Me.byteLength});function ge(t){return pe.push(t),pe.length-1}function ye(e,i,s,h,r,n,o,a,c){let u=new Float32Array(12*e);for(let i=0,l=0;l<e;++l){for(let t=0;t<3;++t)fe[t]=xt(r[t],n[t],Math.random());t(fe,u,0,i,3),i+=3;for(let t=0;t<3;++t)fe[t]=xt(o[t],a[t],Math.random());t(fe,u,0,i,3),i+=3,u[i++]=Math.max(.01,Math.random())*s,u[i++]=h,t(c,u,0,i,4),i+=4}ve.push({s:0,t:i,d:u})}function be(t,e){return t.reduce(((t,i,s)=>(t.push(...e(i,s)),t)),[])}function Ce(t=6){let e=0;for(let i=0;i<t;++i)e+=Math.random();return e/6}function Ne(t,e,i=128){let s=new Float32Array(be(e.i,((t,i)=>[...t,...e.c[i]]))),h=new Float32Array(16*i),r=new Uint16Array(be(e.o,(t=>t)));return{dt:t.buffer({size:s.byteLength}).data(s),vt:t.buffer({type:34963,size:r.byteLength}).data(r),count:r.length,Mt:h,wt:t.buffer({N:35040,size:h.byteLength}),gt:0}}let xe,Ae={yt:ge(Ne(ce,ht,16)),bt:ge(Ne(ce,q,16)),wand:ge(Ne(ce,nt,16)),coil:ge(Ne(ce,at,16)),Ct:ge(Ne(ce,et,256)),eye:ge(Ne(ce,K,256)),Nt:ge(Ne(ce,$,256)),xt:ge(Ne(ce,tt,512)),At:ge(Ne(ce,st,512))},ke=c(),Se=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],ze=A(),Oe=A();function Te(t,e){for(let i=0;i<3;++i)if(t.max[i]<=e.min[i]||t.min[i]>=e.max[i])return!1;return!0}function Ee(t,e,i=!0){return{node:t,kt:2+(i?1:0),i:[0,0,0],St:[0,0,0],shape:e}}function Fe(t){ye(32,.2,.4,.3,[t.body.i[0]+t.body.shape.min[0],t.body.i[1]+t.body.shape.min[1],t.body.i[2]+t.body.shape.min[2]],[t.body.i[0]+t.body.shape.max[0],t.body.i[1]+t.body.shape.max[1],t.body.i[2]+t.body.shape.max[2]],[-10,-10,-10],[10,10,10],R),ye(64,.2,.4,.2,[t.body.i[0]+t.body.shape.min[0],t.body.i[1]+t.body.shape.min[1],t.body.i[2]+t.body.shape.min[2]],[t.body.i[0]+t.body.shape.max[0],t.body.i[1]+t.body.shape.max[1],t.body.i[2]+t.body.shape.max[2]],[-10,-10,-10],[10,10,10],D)}class Ie extends bt{zt=0;Ot=0;constructor(t,e,i,s,h,r){super(t),this.id=e,this.type=i,this.Tt=r,this.body=Ee(this,s,h)}update(t){super.update(t),this.zt=(this.zt+t)%(2*Math.PI),this.Ot=Math.max(0,this.Ot-t),this.id&&!this.Ot&&Math.random()<t/10*this.type&&(this.Ot=this.Tt,this.Et())}Et(){}detach(){super.detach(),Fe(this)}}class Pe extends Ie{constructor(t,e,i=0){super(t,e,1+i,F,!0,5),this.Ft=i,new bt(this).v={id:i?Ae.Nt:Ae.eye},new bt(this).v={id:Ae.At},new bt(this).v={id:Ae.At}}update(t){let e=-3*this.zt;u(this.m[0].t,0,-.1*Math.cos(2*e),0),u(this.m[1].t,-.35,Math.max(.1,.1*(1+Math.sin(e))),.25+.1*Math.cos(e)),u(this.m[2].t,.35,Math.max(.1,.1*(1+Math.sin(e+Math.PI))),.25+.1*Math.cos(e+Math.PI)),super.update(t)}Et(){this.Ft&&qe(3,[this.u[12],this.u[13]+1,this.u[14]],[0,0,10])}}class Je extends Ie{constructor(t,e,i=0){super(t,e,3+i,I,!1,3),this.Ft=i;let s=this.root=new bt(this);s.v={id:i?Ae.Nt:Ae.eye},new bt(s).v={id:Ae.xt},new bt(s).v={id:Ae.xt}}update(t){let e=Math.abs(Math.sin(-3*this.zt));u(this.root.t,0,3-Math.cos(e),0),v([1,0,0],Nt(Math.atan2(this.u[13]+2-hi.u[13],hi.u[14]-this.u[14]+.5),0,Math.PI/3),this.root.r),v([0,1,0],-Math.PI*e/3,this.root.m[0].r),v([0,1,0],Math.PI*(1+e/3),this.root.m[1].r),super.update(t)}Et(){if(this.Ft){let t=c(0,0,10);w(t,this.root.r,t),qe(3,[this.u[12],this.u[13]+3,this.u[14]],t)}}}class Re extends Ie{constructor(t,e){super(t,e,5,P,!0,0),this.v={id:Ae.Ct}}Et(){qe(4,[this.u[12],this.u[13]+1,this.u[14]],[0,0,50])}}function De(){if(!xe){xe=new AudioContext;let t=xe.createGain();t.gain.value=.3,t.connect(xe.destination);let e=lt(xe,...dt);e.loop=!0,e.connect(t),e.start()}}function Le(){xe&&_e(mt(xe,...ut))}function _e(t){t.connect(xe.destination),t.start()}class je extends bt{It=0;o=0;constructor(t,e,i,s=1){super(t),this.c=e,this.p=i,this.s=s;let h=Math.max(1,s/2);this.body=Ee(this,A([-.5*h,-.5*h,-.5*h],[.5*h,.5*h,.5*h]),!1),i&&xe&&_e(mt(xe,...ct))}update(t){super.update(t),++this.o%2&&ye(16,.05*this.s,.1*this.s,.3*this.s,[this.body.i[0]-.2,this.body.i[1]-.2,this.body.i[2]-.2],[this.body.i[0]+.2,this.body.i[1]+.2,this.body.i[2]+.2],[Math.min(0,-this.body.St[0])-5*this.s,Math.min(0,-this.body.St[1])-5*this.s,Math.min(0,-this.body.St[1])-5*this.s],[Math.max(0,-this.body.St[0])+5*this.s,Math.max(0,-this.body.St[1])+5*this.s,Math.max(0,-this.body.St[1])+5*this.s],this.c),((this.It+=t)>=10||this.u[13]<0||this.u[14]<-50||this.u[14]>50)&&this.detach()}detach(){super.detach(),ye(32,.2,.4,.2*this.s,[this.body.i[0]-.2,this.body.i[1]-.2,this.body.i[2]-.2],[this.body.i[0]+.2,this.body.i[1]+.2,this.body.i[2]+.2],[-10*this.s,-10*this.s,-10*this.s],[10*this.s,10*this.s,10*this.s],this.c)}}let Ge=null,Be=[];function We(){let t=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}]}),e=t.createDataChannel("data",{negotiated:!0,id:0});return e.onmessage=t=>{try{Be.push(JSON.parse(t.data))}catch(t){}},{pc:t,ch:e}}function Ye(t,e){return new Promise(((i,s)=>{if(!Ge||t&&!e)return s();t&&((t,e)=>{t.pc.setRemoteDescription(new RTCSessionDescription(JSON.parse(atob(e))))})(Ge,e),"open"===Ge.ch.readyState?i():(Ge.ch.onopen=()=>i(),setTimeout(s,15e3))}))}function He(){Ge&&(Ge.pc.close(),Ge=null)}function Qe(t){try{Ge&&Ge.ch.send(JSON.stringify(t))}catch(t){}}let Ue=[],Ve=[],Ze=[0,0];function Xe(t,e){return t<3?new Pe(ti,e,1&t):t<5?new Je(ti,e,1&t):new Re(ti,e)}function qe(e,i,s,h=!1){let r=e<2?new je(ei,L,!0):e<3?new je(ei,j,!0,2.5):e<4?new je(ei,D,!1):new je(ei,_,!1,.75);return t(i,r.body.i,0,0,3),t(s,r.body.St,0,0,3),!(r.remote=h)&&Mt.p2p&&Ue.push([e,i,s]),r}class Ke extends bt{hp=0;Pt=0;constructor(t,e,i,s=!e){super(t),this.control=i,this.remote=s,this.body=Ee(this,T),this.body.bound=E,this.Jt=new bt(this),this.Jt.v={id:Ae.wand},!e&&(this.v={id:Ae.yt});let h=this.Rt=new bt(this),r=new bt(h);r.M=e,u(r.t,0,1.7,0),v([0,1,0],Math.PI,r.r),v([0,1,0],Math.PI,this.r)}update(t){let e=!1;if(this.control){this.control.update(),this.Pt=Math.max(0,this.Pt-t),!this.Pt&&this.control.Tt&&(this.Pt=.5,e=!0),v([1,0,0],this.control.Dt,this.Rt.r),v([0,1,0],this.control.Lt,this.r);let i=this.control.dir,s=this.body.St;s[0]=10*i[0],s[1]=this.body.i[1]&&i[1]?20:s[1],s[2]=10*i[2]}if(super.update(t),e){let t=c(0,0,25);w(w(t,this.Rt.r,t),this.r,t),qe(this.Jt.v.id===Ae.wand?1:2,[this.u[12],this.u[13]+1.7,this.u[14]],t)}let i=this.Pt?(Math.sin(6*(.5-this.Pt))+1)/2:0;v([1,0,0],Math.max(Math.PI/6,Math.PI/3*i),this.Jt.r),u(this.Jt.t,-.7,1,1-.5*i)}}let $e=new bt,ti=new bt($e),ei=new bt($e),ii=new class{i=c();view=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];_t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];jt=1;Gt=Math.PI/4;Bt=.1;Wt=200;update(e){((t,e,i,s=1/0,r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])=>{let n=1/Math.tan(e/2);if(h(r),r[0]=n/t,r[5]=n,r[11]=-1,r[15]=0,isFinite(s)){let t=1/(i-s);r[10]=(i+s)*t,r[14]=2*i*s*t}else r[10]=-1,r[14]=-2*i})(this.jt,this.Gt,this.Bt,this.Wt,this._t),((t,e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])=>{((t,e,i)=>{let s=0;for(let t=0;t<4;++t)for(let h=t;h<4;++h)s=e[4*h+t],i[4*h+t]=e[4*t+h],i[4*t+h]=s})(0,t,e)})(e,this.view),this.view[3]=this.view[7]=this.view[11]=0,t(m(this.view,f(t(e,this.i,12,0,3),-1)),this.view,0,12,3)}},si=new class{touch=!1;paused=!0;dir=c();touches={};Yt={};constructor(t,e,i=At/4){this.canvas=t,this.Ht=e,this.w=i,this.reset(),document.addEventListener("pointerlockchange",this.lock)}start(){this.paused&&(this.touch?(this.Qt(!0),document.body.requestFullscreen&&document.body.requestFullscreen(),this.paused=!1):this.canvas.requestPointerLock())}pause(){this.touch?this.Qt(!1):document.exitPointerLock()}reset(){this.pause(),this.paused=!0,this.Dt=-(this.Lt=At/2)/12,this.Tt=!1,this.action=0}update(){let t=this.paused?0:this.action|(t=>{let e=navigator.getGamepads&&navigator.getGamepads()[0],i=0;if(e){(e.buttons[0]&&e.buttons[0].pressed||e.buttons[7]&&e.buttons[7].pressed)&&(i|=16);let s=e.axes[0]||0,h=e.axes[1]||0;Math.abs(s)>.3&&(i|=s<0?1:2),Math.abs(h)>.3&&(i|=s<0?4:8),s=e.axes[2]||0,h=e.axes[3]||0,t.Ut(Math.abs(s)>.3?s/200:0,Math.abs(h)>.3?h/200:0)}return i})(this);this.Tt=!!(16&t),this.dir[0]=(1&t?1:0)+(2&t?-1:0),this.dir[1]=0,this.dir[2]=(8&t?-1:0)+(4&t?1:0),w(this.dir,v([0,1,0],this.Lt,kt),this.dir)}Ut(t,e){this.Lt=Nt((this.Lt-t*this.w+At)%At,At/8*3,At/8*5),this.Dt=Nt(this.Dt+e*this.w,-At/8,At/48)}Qt(t){this.Ht.hidden=!t;let e=(t?this.Ht.addEventListener:this.Ht.removeEventListener).bind(this.Ht),i=t?addEventListener:removeEventListener;e("touchstart",this.Vt),e("touchend",this.Zt),i("touchstart",this.Xt),i("touchend",this.qt),i("touchmove",this.Kt)}lock=()=>{let t=(this.paused=document.pointerLockElement!==this.canvas)?removeEventListener:addEventListener;t("mousemove",this.$t),t("mousedown",this.te),t("mouseup",this.ee),t("keydown",this.ie),t("keyup",this.se)};$t=t=>{this.Ut(t.movementX/innerWidth,t.movementY/innerHeight)};te=t=>{t.preventDefault(),0===t.button&&(this.action=16|this.action)};ee=t=>{t.preventDefault(),0===t.button&&(this.action=-17&this.action)};Kt=t=>{for(let e=0;e<t.changedTouches.length;++e){let i=t.changedTouches.item(e),s=this.Yt[i.identifier];if(!s)continue;let h=this.touches[s],r=(i.clientX-h[0])/innerWidth,n=(i.clientY-h[1])/innerHeight;1===s?(this.action=-16&this.action,Math.abs(r)>.02&&(this.action=this.action|(r<0?1:2)),Math.abs(n)>.02&&(this.action=this.action|(r<0?4:8))):(this.Ut(r,n),h[0]=i.clientX,h[1]=i.clientY)}};Xt=t=>{for(let e=0;e<t.changedTouches.length;++e){let i=t.changedTouches.item(e),s=i.clientX/innerWidth<.5?1:2;this.touches[s]||(this.touches[s]=[i.clientX,i.clientY],this.Yt[i.identifier]=s)}};qt=t=>{t.preventDefault();for(let e=0;e<t.changedTouches.length;++e){let i=t.changedTouches.item(e).identifier,s=this.Yt[i];s&&(1===s&&(this.action=-16&this.action),delete this.touches[s],delete this.Yt[i])}};Vt=t=>{t.preventDefault(),this.action=16|this.action};Zt=t=>{t.preventDefault(),this.action=-17&this.action};ie=t=>{t.preventDefault(),this.action=this.action|St(t.key)};se=t=>{t.preventDefault(),this.action=this.action&~St(t.key)}}(Bt,re),hi=new Ke($e,ii,si),ri=new Ke($e);ri.hide=!0,ye(384,1/0,1,4,[-32,50,-52],[-30,52,-50],[-.1,-.1,-.1],[.1,.1,.1],[1,.95,.65,.5]),ye(384,1/0,7,.4,[-100,10,-100],[100,100,100],[0,0,0],[0,0,0],R),new bt($e).v={id:Ae.bt};let ni=new bt($e),oi=new Je(ni,0,1),ai=new Je(ni,0,0),ci=new Pe(ni,0,0),ui=new Pe(ni,0,1);u(oi.body.i,5,5,32),u(ai.body.i,-7,4,30),u(ci.body.i,3,0,20),u(ui.body.i,-2.5,0,28),v([0,1,0],-Math.PI/8,oi.r),v([0,1,0],Math.PI/8,ai.r),v([0,1,0],-Math.PI/12,ci.r),v([0,1,0],Math.PI/12,ui.r);let li=0,fi=0;try{let t=JSON.parse(localStorage.getItem("_INVADERS")||"{}")||{};li=+(t.s||0),fi=+(t.w||0)}catch(t){}let mi=!0;function di(){ii.jt=(Bt.width=innerWidth)/(Bt.height=innerHeight)}function pi(){si.start()}di(),addEventListener("resize",di),ee.addEventListener("click",(()=>{mi&&(mi=!1,Bt.toBlob((t=>{fetch("https://api.nft.storage/upload",{method:"POST",headers:new Headers({Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJkaWQ6ZXRocjoweEZlQTM2YTllQTRCNDVmNGY5MjBlNDA5N2MxZUQ2MEM2Q2UzNEY2MkYiLCJpc3MiOiJuZnQtc3RvcmFnZSIsImlhdCI6MTYzMDAzNjE1MzY3OCwibmFtZSI6IkpTMTNLMjAyMSJ9.DoVXYaDRFyE8vDSjmCmN2-E13jGl1muuAUyekJB0JXs"}),body:t}).then((t=>t.json())).then((t=>{open("https://cloudflare-ipfs.com/ipfs/"+t.value.cid,"_blank"),mi=!0}))})))})),Ht.addEventListener("touchend",(t=>{t.preventDefault(),De(),yt(!0)})),Ht.addEventListener("click",(()=>{De(),yt(!1)})),Kt.addEventListener("touchend",(t=>{t.preventDefault(),De(),Ye(Mt.host,oe.value).then((()=>{yt(!0,!0)}),(()=>ae.innerText="CANNOT START"))})),Kt.addEventListener("click",(()=>{De(),Ye(Mt.host,oe.value).then((()=>{yt(!1,!0)}),(()=>ae.innerText="CANNOT START"))})),Vt.addEventListener("click",(()=>{gt({beg:!Mt.beg})})),Ut.addEventListener("click",(()=>{gt({coil:!Mt.coil})})),Qt.addEventListener("click",(()=>{gt({scr:2})})),Zt.addEventListener("click",(()=>{gt({scr:1})})),Xt.addEventListener("click",(()=>{new Promise(((t,e)=>{if(Ge)return e();Ge=We(),Ge.pc.createOffer().then((t=>Ge.pc.setLocalDescription(t))).then((()=>{setTimeout((()=>t(btoa(JSON.stringify(Ge.pc.localDescription)))),3e3)})).catch(e)})).then((t=>{ne.value=t,gt({host:!0})}),(()=>ae.innerText="CANNOT HOST"))})),qt.addEventListener("click",(()=>{var t;(t=ne.value,new Promise(((e,i)=>{Ge=We(),Ge.pc.setRemoteDescription(new RTCSessionDescription(JSON.parse(atob(t)))).then((()=>Ge.pc.createAnswer())).then((t=>Ge.pc.setLocalDescription(t))).then((()=>{setTimeout((()=>e(btoa(JSON.stringify(Ge.pc.localDescription)))),3e3)})).catch(i)}))).then((t=>{oe.value=t,gt({host:!1})}),(()=>ae.innerText="CANNOT JOIN"))})),wt.push(((t,e,i)=>{(i||t.scr!==e.scr)&&(Wt.hidden=1!==t.scr,Yt.hidden=2!==t.scr,te.hidden=4!==t.scr,se.hidden=4!==t.scr,ni.hide=4===t.scr,ne.value="",oe.value="",1===t.scr&&(ie.innerText="HISCORE "+li),4===t.scr&&((si.touch=t.touch)||addEventListener("mouseup",pi),pi()),8===t.scr&&(He(),Be.length=0,si.reset(),!t.touch&&removeEventListener("mouseup",pi),((t,e)=>{try{localStorage.setItem("_INVADERS",JSON.stringify({s:li=Math.max(li,t),w:fi=Math.max(fi,e)}))}catch(t){}})(t.score,t.wave),gt({scr:1,beg:fi<pt.length&&t.beg}))),t.sub&&(he.hidden=!1,Ut.hidden=!1,!i&&e.sub&&t.coil===e.coil||(Ut.innerText=(t.coil?"‚òë":"‚òê")+" COIL WEAPON",hi.Jt.v.id=t.coil?Ae.coil:Ae.wand)),(i||t.beg!==e.beg)&&(Vt.innerText=(t.beg?"‚òë":"‚òê")+" BEGINNER"),4!==t.scr||4===e.scr&&t.score===e.score||(ie.innerText="SCORE "+t.score),t.hp!==e.hp&&(se.innerText="LIVES "+Array(0|t.hp).fill("‚¨§").join(" "),t.hp<e.hp&&($t.classList.add("hit"),setTimeout((()=>$t.classList.remove("hit")),100)))}));let vi=0,Mi=-1.5,wi=0,gi=0;wt.push(((t,e,i)=>{(i||t.scr!==e.scr)&&(4===t.scr?(hi.hp=t.hp,u(hi.body.i,Mt.p2p?10*(Mt.host?1:-1):0,0,45),gi=Date.now()/1e3):(u(hi.body.i,0,0,45),u(hi.body.St,0,0,0),ei.m.length=0,ti.m.length=0,ri.hide=!0)),t.wave!==e.wave&&(t.beg&&e.wave<=pt.length?hi.hp=4+(Mt.coil?1:0):!e.wave||e.wave%4||(hi.hp=Math.min(5,hi.hp+2)))}));let yi=[],bi=[],Ci=0;function Ni(t,e){let i=t.node,s=e.node;s instanceof je?!s.p&&i instanceof Ke?i.remote||(Le(),s.detach(),hi.hp--):s.p&&i instanceof Ie?(Le(),s.detach(),s.remote||(i.detach(),Ve.push(i.id),hi.Pt=0,gt({score:Mt.score+1}))):s.p&&i instanceof je&&!i.p&&(Le(),s.detach(),i.detach(),s.remote||(hi.Pt=0)):s instanceof Ie&&i instanceof Ke&&(i.remote||(Le(),s.detach(),hi.hp--,Ve.push(s.id)))}function xi(t){for(let e=0,i=0;i<t.length;++i)for(let s=0;s<t[i].length;++s)for(let h=0;h<11;++h){let r=t[i][t[i].length-s-1][h];r&&u(Xe(r,++e).body.i,3*(h-5),3*s+(r<3||5===r?20:0),Math.min(15,Mt.wave/2|0)-6*i-s)}}requestAnimationFrame((function e(i){requestAnimationFrame(e),i/=1e3;let s=Ci?i-Ci:0;Ci=i,4===Mt.scr&&(Mt.p2p&&!Mt.host||(t=>{if(vi||ti.m.length||(vi=1,gt({wave:Mt.wave+1})),vi&&!(vi=Math.max(0,vi-t))){let t=Mt.beg&&Mt.wave<pt.length?pt[Mt.wave]:Mt.wave%4==3?vt[(Mt.wave<4*(Mt.beg?2:1)?2:vt.length)*Math.random()|0]:(()=>{let t=[];for(let e=0;e<5;++e){let e=[];for(let t=0;t<4;++t)e.push([]);t.push(e)}let e=22+Math.min(33,(Mt.wave+5)*Math.random()|0);for(let i=0,s=0;i<e&&s<256;++s){let e=5*Ce(2)|0,s=4*Ce()|0,h=11*(Math.random()<.4?Math.random():Ce())|0;if(t[e][s][h])continue;let r=Math.random();t[e][s][h]=r<.05?5:r<.15?1:r<.3?2:r<.65?3:4,++i}return t})();xi(t),Mi=-1.5,wi=0,Ze[0]=0,Ze[1]=0,Mt.p2p&&((t,e)=>{Qe({t:Date.now(),w:t,e})})(Mt.wave,t)}})(s),Mt.p2p&&(i-gi>15?(He(),gt({p2p:!1,host:!0}),ri.hide=!0):(Qe({t:Date.now(),h:hi.hp,p:hi.body.i,c:Mt.coil,l:Ze[0],f:Ze[1],d:Ve,b:Ue}),Ve.length=0,Ue.length=0,(()=>{Be.length&&(gi=Date.now()/1e3);for(let e of Be)if(e.e&&(gt({wave:e.w}),xi(e.e),Mi=-1.5,wi=0,Ze[0]=0,Ze[1]=0),e.p){let i=ri.hide;(ri.hide=e.h<=0)&&i&&Fe(ri),ri.Jt.v.id=e.c?Ae.coil:Ae.wand,t(e.p,ri.body.i,0,0,3);for(let t of e.d){let e=ti.m.find((e=>e.id===t));e&&e.detach()}for(let t of e.b)qe(...t,!0),t[0]<3&&(ri.Pt=.5);if(!Mt.host&&(e.l!==Ze[0]||e.f!==Ze[1])){for(let t of ti.m)t.type>=3&&t.type<5&&(t.body.i[0]+=e.l-Ze[0],t.body.i[2]+=e.f-Ze[1]);Ze[0]=e.l,Ze[1]=e.f}}Be.length=0})())),Mt.hp!==hi.hp&&gt({scr:Math.max(hi.hp,0)?4:8,hp:Math.max(hi.hp,0)}),(t=>{wi=Math.max(0,wi-t);let e=20,i=-20;for(let t of ti.m)3!==t.type&&4!==t.type||(e=Math.min(e,t.u[12]),i=Math.max(i,t.u[12])),t.u[14]>45&&(Le(),hi.hp=0);(Mi<0&&e<=-20||Mi>0&&i>=20)&&(Mi*=-1,wi=4),Ze[0]+=Mi*t,Ze[1]+=wi?t:0;for(let t of ti.m)t.type<3?u(t.body.St,0,t.body.St[1],1):t.type<5&&u(t.body.St,Mi,0,wi?1:0)})(s)),yi.length=bi.length=0,Ct($e,(t=>{t.body&&yi.push(t.body),t.v&&bi.push(t.v)})),((t,e,i)=>{for(let i of e)if(1&i.kt&&(f(O,t,ke),l(i.St,ke,i.St)),f(i.St,t,ke),l(i.i,ke,i.i),1&i.kt){for(let t=0;t<3;++t)i.i[t]=Nt(i.i[t],S[t],z[t]),i.bound&&(i.i[t]=Nt(i.i[t],i.bound.min[t],i.bound.max[t]));i.i[1]===S[1]&&(i.St[1]=0)}for(let t=0;t<e.length;++t)if(2&e[t].kt){k(e[t].shape,g(e[t].i,Se),ze);for(let s=0;s<e.length;++s)t!=s&&(k(e[s].shape,g(e[s].i,Se),Oe),Te(ze,Oe)&&i&&i(e[t],e[s]))}})(s,yi,Ni),$e.update(s);let h=ce.U(ue);((e,i,s)=>{for(let t of pe)t.gt=0;s.sort(((t,e)=>t.id-e.id));for(let e of s){let i=pe[e.id];16*(i.gt+1)<=i.Mt.length&&t(e.u||le,i.Mt,0,16*i.gt++)}e.B(me).ct([{name:"vp",values:r(i._t,i.view)},{name:"p",values:i.i},{name:"f",values:J}]);for(let t of pe)t.gt&&(t.wt.data(t.Mt),e.at(0,t.dt).at(1,t.wt).index(t.vt).ft(t.count,t.gt))})(h,ii,bi),((e,i,s)=>{if(!ve.length)return;e.B(de).at(0,we).ct([{name:"vp",values:r(i._t,i.view)},{name:"vw",value:Bt.width},{name:"ct",value:s}]);let h=0;for(let e=0;e<ve.length;){let i=ve[e];s>(i.s=i.s||s)+i.t?(ve[e]=ve[ve.length-1],ve.pop()):(h+i.d.length<=Me.length&&(t(i.d,Me,0,h,i.d.length),h+=i.d.length),++e)}we.data(Me),e.lt(h/12)})(h,ii,i),h.end()})),document.monetization&&document.monetization.addEventListener("monetizationstart",(()=>{gt({sub:!0,coil:!0})})),gt(Mt,!0);</script></body></html>